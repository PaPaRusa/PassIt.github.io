{
  "name": "permitflow",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  }

### `src/app/product/page.tsx`
````````````````````typescript
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Card } from '@/components/ui/Card';
import Link from 'next/link';
import { Button } from '@/components/ui/Button';

export default function ProductPage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        <section className="py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="max-w-3xl mx-auto text-center mb-16">
              <h1 className="text-4xl font-bold text-neutral-900 mb-4">
                How PermitFlow Works
              </h1>
              <p className="text-lg text-neutral-600">
                Comprehensive compliance analysis that integrates with your existing workflow to reduce permit review cycles and increase first-submittal approval rates.
              </p>
            </div>

            <div className="space-y-20">
              {/* Step 1 */}
              <div className="grid md:grid-cols-2 gap-12 items-center">
                <div>
                  <div className="text-sm font-medium text-primary-600 mb-2">Step 1</div>
                  <h2 className="text-3xl font-bold text-neutral-900 mb-4">
                    Create Your Project
                  </h2>
                  <p className="text-neutral-600 mb-6">
                    Input basic project details including location, project type, building classification, and scope of work. Our system uses jurisdiction-specific data to contextualize your analysis.
                  </p>
                  <ul className="space-y-3 text-sm text-neutral-600">
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Jurisdiction-aware analysis
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Support for all permit types
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Project organization by client or site
                    </li>
                  </ul>
                </div>
                <Card className="bg-neutral-50">
                  <div className="h-64 flex items-center justify-center text-neutral-400">
                    Project Creation Interface Preview
                  </div>
                </Card>
              </div>

              {/* Step 2 */}
              <div className="grid md:grid-cols-2 gap-12 items-center">
                <Card className="bg-neutral-50 order-2 md:order-1">
                  <div className="h-64 flex items-center justify-center text-neutral-400">
                    Document Upload & Analysis Preview
                  </div>
                </Card>
                <div className="order-1 md:order-2">
                  <div className="text-sm font-medium text-primary-600 mb-2">Step 2</div>
                  <h2 className="text-3xl font-bold text-neutral-900 mb-4">
                    Submit Plans & Documents
                  </h2>
                  <p className="text-neutral-600 mb-6">
                    Upload architectural plans, engineering calculations, or paste project notes. Our analysis engine reviews for code compliance, setback requirements, energy code, and jurisdiction-specific factors.
                  </p>
                  <ul className="space-y-3 text-sm text-neutral-600">
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      PDF plan upload supported
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Text-based scope input
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Secure encrypted storage
                    </li>
                  </ul>
                </div>
              </div>

              {/* Step 3 */}
              <div className="grid md:grid-cols-2 gap-12 items-center">
                <div>
                  <div className="text-sm font-medium text-primary-600 mb-2">Step 3</div>
                  <h2 className="text-3xl font-bold text-neutral-900 mb-4">
                    Review Risk Analysis
                  </h2>
                  <p className="text-neutral-600 mb-6">
                    Receive quantified risk scores, approval probability, expected review time, and actionable recommendations. Each risk factor includes code references and specific fix suggestions.
                  </p>
                  <ul className="space-y-3 text-sm text-neutral-600">
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Ranked risk factors with severity
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Building code references
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Actionable fix recommendations
                    </li>
                  </ul>
                </div>
                <Card className="bg-neutral-50">
                  <div className="h-64 flex items-center justify-center text-neutral-400">
                    Risk Analysis Results Preview
                  </div>
                </Card>
              </div>

              {/* Step 4 */}
              <div className="grid md:grid-cols-2 gap-12 items-center">
                <Card className="bg-neutral-50 order-2 md:order-1">
                  <div className="h-64 flex items-center justify-center text-neutral-400">
                    Export & Documentation Preview
                  </div>
                </Card>
                <div className="order-1 md:order-2">
                  <div className="text-sm font-medium text-primary-600 mb-2">Step 4</div>
                  <h2 className="text-3xl font-bold text-neutral-900 mb-4">
                    Export & Iterate
                  </h2>
                  <p className="text-neutral-600 mb-6">
                    Generate PDF reports for internal review or client communication. Re-analyze updated plans to track risk reduction as you address compliance issues.
                  </p>
                  <ul className="space-y-3 text-sm text-neutral-600">
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Professional PDF export
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Analysis history tracking
                    </li>
                    <li className="flex items-start">
                      <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                      </svg>
                      Risk trend visualization
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div className="mt-20 text-center">
              <h2 className="text-2xl font-bold text-neutral-900 mb-4">
                Ready to get started?
              </h2>
              <Link href="/signup">
                <Button size="lg">Start Free Trial</Button>
              </Link>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}

### `src/app/pricing/page.tsx`
```````````````````typescript
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Card } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import Link from 'next/link';

export default function PricingPage() {
  const plans = [
    {
      name: 'Starter',
      price: '299',
      description: 'For individual contractors and small builders',
      features: [
        '10 risk analyses per month',
        'Basic jurisdiction library',
        'PDF export',
        'Email support',
        '30-day analysis history',
        'Standard review time predictions'
      ],
      cta: 'Start Free Trial',
      highlighted: false
    },
    {
      name: 'Professional',
      price: '799',
      description: 'For growing firms and development companies',
      features: [
        '50 risk analyses per month',
        'Full jurisdiction library',
        'Priority PDF export',
        'Priority email & chat support',
        '1-year analysis history',
        'Advanced risk factor insights',
        'Project collaboration (5 seats)',
        'API access'
      ],
      cta: 'Start Free Trial',
      highlighted: true
    },
    {
      name: 'Enterprise',
      price: 'Custom',
      description: 'For large developers and multi-office firms',
      features: [
        'Unlimited risk analyses',
        'Custom jurisdiction data',
        'Dedicated success manager',
        'Phone & Slack support',
        'Unlimited history & archival',
        'Custom integrations',
        'Unlimited seats',
        'SOC 2 compliance',
        'SSO / SAML authentication',
        'SLA guarantee'
      ],
      cta: 'Contact Sales',
      highlighted: false
    }
  ];

  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        <section className="py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h1 className="text-4xl font-bold text-neutral-900 mb-4">
                Transparent Pricing
              </h1>
              <p className="text-lg text-neutral-600 max-w-2xl mx-auto">
                Choose the plan that fits your permit volume. All plans include 14-day free trial with no credit card required.
              </p>
            </div>

            <div className="grid md:grid-cols-3 gap-8 mb-16">
              {plans.map((plan) => (
                <Card 
                  key={plan.name} 
                  className={plan.highlighted ? 'border-2 border-primary-600 shadow-lg' : ''}
                >
                  {plan.highlighted && (
                    <div className="text-xs font-semibold text-primary-600 mb-4">
                      MOST POPULAR
                    </div>
                  )}
                  <h3 className="text-2xl font-bold text-neutral-900 mb-2">{plan.name}</h3>
                  <div className="mb-4">
                    {plan.price === 'Custom' ? (
                      <div className="text-3xl font-bold text-neutral-900">Custom</div>
                    ) : (
                      <>
                        <span className="text-4xl font-bold text-neutral-900">${plan.price}</span>
                        <span className="text-neutral-600">/month</span>
                      </>
                    )}
                  </div>
                  <p className="text-sm text-neutral-600 mb-6">{plan.description}</p>
                  
                  <Link href={plan.price === 'Custom' ? '/contact' : '/signup'}>
                    <Button 
                      variant={plan.highlighted ? 'primary' : 'secondary'} 
                      className="w-full mb-6"
                    >
                      {plan.cta}
                    </Button>
                  </Link>

                  <ul className="space-y-3">
                    {plan.features.map((feature) => (
                      <li key={feature} className="flex items-start text-sm text-neutral-600">
                        <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                        </svg>
                        {feature}
                      </li>
                    ))}
                  </ul>
                </Card>
              ))}
            </div>

            <div className="bg-neutral-50 rounded-lg p-8">
              <h2 className="text-2xl font-bold text-neutral-900 mb-6 text-center">
                Frequently Asked Questions
              </h2>
              <div className="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div>
                  <h3 className="font-semibold text-neutral-900 mb-2">What counts as an analysis?</h3>
                  <p className="text-sm text-neutral-600">
                    Each unique risk score generation counts as one analysis. Re-analyzing the same project with updated plans counts as a new analysis.
                  </p>
                </div>
                <div>
                  <h3 className="font-semibold text-neutral-900 mb-2">Can I upgrade or downgrade?</h3>
                  <p className="text-sm text-neutral-600">
                    Yes, you can change plans at any time. Upgrades are immediate; downgrades take effect at your next billing cycle.
                  </p>
                </div>
                <div>
                  <h3 className="font-semibold text-neutral-900 mb-2">What jurisdictions are supported?</h3>
                  <p className="text-sm text-neutral-600">
                    We currently support major California jurisdictions with expanding coverage. Enterprise plans can request custom jurisdiction data.
                  </p>
                </div>
                <div>
                  <h3 className="font-semibold text-neutral-900 mb-2">Is this legal advice?</h3>
                  <p className="text-sm text-neutral-600">
                    No. PermitFlow is a decision support tool. Final permit authority remains with the jurisdiction AHJ. Consult licensed professionals.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}

### `src/app/security/page.tsx`
``````````````````typescript
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Card } from '@/components/ui/Card';

export default function SecurityPage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        <section className="py-20">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h1 className="text-4xl font-bold text-neutral-900 mb-4">
                Enterprise Security & Compliance
              </h1>
              <p className="text-lg text-neutral-600">
                PermitFlow is built with enterprise-grade security standards to protect your project data and maintain compliance.
              </p>
            </div>

            <div className="space-y-12">
              <Card>
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Data Encryption</h2>
                <p className="text-neutral-600 mb-4">
                  All data is encrypted in transit and at rest using industry-standard protocols.
                </p>
                <ul className="space-y-2 text-sm text-neutral-600">
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    TLS 1.3 encryption for all data in transit
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    AES-256 encryption for data at rest
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Encrypted database backups with automatic rotation
                  </li>
                </ul>
              </Card>

              <Card>
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Access Control</h2>
                <p className="text-neutral-600 mb-4">
                  Fine-grained access controls ensure only authorized users can access your project data.
                </p>
                <ul className="space-y-2 text-sm text-neutral-600">
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Role-based access control (RBAC)
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    SSO/SAML authentication (Enterprise)
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Multi-factor authentication (MFA) available
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Session management and automatic timeout
                  </li>
                </ul>
              </Card>

              <Card>
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Audit Logging</h2>
                <p className="text-neutral-600 mb-4">
                  Comprehensive audit trails track all system activity for compliance and security monitoring.
                </p>
                <ul className="space-y-2 text-sm text-neutral-600">
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    User authentication and authorization events
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Data access and modification tracking
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Export and analysis generation logs
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Tamper-proof log storage with retention policies
                  </li>
                </ul>
              </Card>

              <Card>
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Infrastructure Security</h2>
                <p className="text-neutral-600 mb-4">
                  Our infrastructure is hosted on certified cloud platforms with robust security controls.
                </p>
                <ul className="space-y-2 text-sm text-neutral-600">
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    SOC 2 Type II certified infrastructure
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Regular security audits and penetration testing
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    24/7 monitoring and incident response
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Automated vulnerability scanning
                  </li>
                </ul>
              </Card>

              <Card>
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Data Residency & Privacy</h2>
                <p className="text-neutral-600 mb-4">
                  We maintain strict data handling practices to protect your privacy and maintain compliance.
                </p>
                <ul className="space-y-2 text-sm text-neutral-600">
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Data stored in US-based secure data centers
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    GDPR and CCPA compliance
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    Data deletion and export on request
                  </li>
                  <li className="flex items-start">
                    <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                    </svg>
                    No data sharing with third parties without consent
                  </li>
                </ul>
              </Card>

              <Card className="bg-neutral-50">
                <h2 className="text-2xl font-bold text-neutral-900 mb-4">Security Questions?</h2>
                <p className="text-neutral-600 mb-4">
                  Our security team is available to answer questions about our security practices, compliance certifications, and custom security requirements for Enterprise customers.
                </p>
                <Link href="/contact">
                  <Button>Contact Security Team</Button>
                </Link>
              </Card>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}

### `src/app/case-studies/page.tsx`
`````````````````typescript
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Card } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';

export default function CaseStudiesPage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        <section className="py-20">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h1 className="text-4xl font-bold text-neutral-900 mb-4">
                Case Studies
              </h1>
              <p className="text-lg text-neutral-600">
                Real-world results from developers and contractors using PermitFlow to streamline permit approvals.
              </p>
            </div>

            <div className="space-y-12">
              {/* Case Study 1 */}
              <Card className="p-8">
                <div className="flex items-start justify-between mb-4">
                  <div>
                    <h2 className="text-2xl font-bold text-neutral-900 mb-2">
                      Bay Area Development Group
                    </h2>
                    <p className="text-neutral-600">Multi-family residential developer, San Jose</p>
                  </div>
                  <Badge variant="success">Residential</Badge>
                </div>

                <div className="grid md:grid-cols-3 gap-6 mb-6 p-6 bg-neutral-50 rounded-lg">
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">71%</div>
                    <div className="text-sm text-neutral-600">Reduction in correction cycles</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">31 days</div>
                    <div className="text-sm text-neutral-600">Faster approval timeline</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">$124K</div>
                    <div className="text-sm text-neutral-600">Estimated cost savings</div>
                  </div>
                </div>

                <div className="space-y-4 text-neutral-600">
                  <p>
                    <span className="font-semibold text-neutral-900">Challenge:</span> Bay Area Development Group was experiencing 3-4 correction cycles on ADU permits in San Jose, with average approval times exceeding 90 days. Setback violations and energy code documentation were recurring issues leading to costly delays.
                  </p>
                  <p>
                    <span className="font-semibold text-neutral-900">Solution:</span> The team integrated PermitFlow into their pre-submittal review process. Each project received a compliance risk analysis before formal submission, identifying setback conflicts, Title 24 documentation gaps, and jurisdiction-specific requirements.
                  </p>
                  <p>
                    <span className="font-semibold text-neutral-900">Results:</span> First-submittal approval rates increased from 23% to 89%. Average permit approval time decreased to 59 days. The firm eliminated $124,000 in annual carrying costs from permit delays across their project pipeline.
                  </p>
                  <blockquote className="border-l-4 border-primary-600 pl-4 italic">
                    "PermitFlow catches code issues our team would have missed. We're now submitting complete packages the first time, which has dramatically reduced our time to approval. The jurisdiction-specific flags for San Jose have been particularly valuable."
                    <footer className="text-sm mt-2 not-italic">— Development Director</footer>
                  </blockquote>
                </div>
              </Card>

              {/* Case Study 2 */}
              <Card className="p-8">
                <div className="flex items-start justify-between mb-4">
                  <div>
                    <h2 className="text-2xl font-bold text-neutral-900 mb-2">
                      Pacific Coast Builders
                    </h2>
                    <p className="text-neutral-600">Commercial contractor, Bay Area</p>
                  </div>
                  <Badge variant="info">Commercial</Badge>
                </div>

                <div className="grid md:grid-cols-3 gap-6 mb-6 p-6 bg-neutral-50 rounded-lg">
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">58%</div>
                    <div className="text-sm text-neutral-600">Faster plan check cycles</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">94%</div>
                    <div className="text-sm text-neutral-600">First-time approval rate</div>
                  </div>
                  <div className="text-center">
                    <div className="text-3xl font-bold text-primary-600 mb-1">18</div>
                    <div className="text-sm text-neutral-600">Projects analyzed monthly</div>
                  </div>
                </div>

                <div className="space-y-4 text-neutral-600">
                  <p>
                    <span className="font-semibold text-neutral-900">Challenge:</span> Pacific Coast Builders operates across multiple Bay Area jurisdictions, each with unique requirements. Their team struggled to maintain current knowledge of jurisdiction-specific submission requirements, leading to incomplete submittals and extended review cycles.
                  </p>
                  <p>
                    <span className="font-semibold text-neutral-900">Solution:</span> PermitFlow's jurisdiction library provided standardized checklists for San Francisco, Oakland, and San Jose submissions. The risk analysis identified missing documentation before formal submittal, including structural calculations, energy compliance forms, and stormwater management plans.
                  </p>
                  <p>
                    <span className="font-semibold text-neutral-900">Results:</span> Plan check cycle times decreased from an average of 68 days to 29 days. The firm reduced engineering consultant fees by 22% by catching structural documentation issues earlier in the process. Client satisfaction scores improved significantly due to more predictable timelines.
                  </p>
                  <blockquote className="border-l-4 border-primary-600 pl-4 italic">
                    "The jurisdiction-specific insights are game-changing. We're no longer guessing about submission requirements or getting surprised by local interpretations of code. PermitFlow has become an essential tool for our estimating and planning process."
                    <footer className="text-sm mt-2 not-italic">— Operations Manager</footer>
                  </blockquote>
                </div>
              </Card>
            </div>

            <div className="mt-16 text-center p-8 bg-neutral-50 rounded-lg">
              <h2 className="text-2xl font-bold text-neutral-900 mb-4">
                Ready to improve your approval rate?
              </h2>
              <p className="text-neutral-600 mb-6">
                Join development firms using PermitFlow to reduce permit risk and accelerate project timelines.
              </p>
              <Button size="lg">Start Free Trial</Button>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}

### `src/app/contact/page.tsx`
````````````````typescript
'use client';

import { useState } from 'react';
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Card } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { Input } from '@/components/ui/Input';
import { Textarea } from '@/components/ui/Textarea';
import { Select } from '@/components/ui/Select';

export default function ContactPage() {
  const [submitted, setSubmitted] = useState(false);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    setSubmitted(true);
  };

  if (submitted) {
    return (
      <div className="min-h-screen flex flex-col">
        <Header />
        <main className="flex-1 flex items-center justify-center">
          <Card className="max-w-md text-center">
            <div className="text-green-600 mb-4">
              <svg className="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
              </svg>
            </div>
            <h2 className="text-2xl font-bold text-neutral-900 mb-2">Thank you!</h2>
            <p className="text-neutral-600 mb-6">
              We've received your message and will respond within 24 hours.
            </p>
            <Button onClick={() => setSubmitted(false)}>Send Another Message</Button>
          </Card>
        </main>
        <Footer />
      </div>
    );
  }

  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        <section className="py-20">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h1 className="text-4xl font-bold text-neutral-900 mb-4">
                Contact Us
              </h1>
              <p className="text-lg text-neutral-600">
                Have questions about PermitFlow? We're here to help.
              </p>
            </div>

            <div className="grid md:grid-cols-2 gap-12">
              <div>
                <h2 className="text-2xl font-bold text-neutral-900 mb-6">Get in Touch</h2>
                
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div className="grid grid-cols-2 gap-4">
                    <Input label="First Name" required />
                    <Input label="Last Name" required />
                  </div>
                  
                  <Input label="Email" type="email" required />
                  
                  <Input label="Company" />
                  
                  <Select
                    label="Inquiry Type"
                    options={[
                      { value: '', label: 'Select an option' },
                      { value: 'sales', label: 'Sales & Pricing' },
                      { value: 'support', label: 'Technical Support' },
                      { value: 'enterprise', label: 'Enterprise Plans' },
                      { value: 'other', label: 'Other' }
                    ]}
                    required
                  />
                  
                  <Textarea 
                    label="Message" 
                    placeholder="Tell us how we can help..."
                    rows={6}
                    required
                  />
                  
                  <Button type="submit" className="w-full">
                    Send Message
                  </Button>
                </form>
              </div>

              <div>
                <h2 className="text-2xl font-bold text-neutral-900 mb-6">Other Ways to Reach Us</h2>
                
                <div className="space-y-6">
                  <Card className="p-6">
                    <h3 className="font-semibold text-neutral-900 mb-2">Sales</h3>
                    <p className="text-sm text-neutral-600 mb-2">
                      Questions about pricing or enterprise plans?
                    </p>
                    <a href="mailto:sales@permitflow.com" className="text-sm text-primary-600 hover:text-primary-700">
                      sales@permitflow.com
                    </a>
                  </Card>

                  <Card className="p-6">
                    <h3 className="font-semibold text-neutral-900 mb-2">Support</h3>
                    <p className="text-sm text-neutral-600 mb-2">
                      Need help with your account or analysis?
                    </p>
                    <a href="mailto:support@permitflow.com" className="text-sm text-primary-600 hover:text-primary-700">
                      support@permitflow.com
                    </a>
                  </Card>

                  <Card className="p-6">
                    <h3 className="font-semibold text-neutral-900 mb-2">Security</h3>
                    <p className="text-sm text-neutral-600 mb-2">
                      Security inquiries or compliance questions?
                    </p>
                    <a href="mailto:security@permitflow.com" className="text-sm text-primary-600 hover:text-primary-700">
                      security@permitflow.com
                    </a>
                  </Card>

                  <div className="pt-6 border-t border-neutral-200">
                    <p className="text-sm text-neutral-600">
                      Response times: Sales inquiries within 24 hours, Support within 4 hours (Professional and Enterprise plans).
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}

### `src/app/login/page.tsx`
```````````````typescript
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import Link from 'next/link';
import { createClient } from '@/lib/supabase/client';
import { Button } from '@/components/ui/Button';
import { Input } from '@/components/ui/Input';
import { Card } from '@/components/ui/Card';

export default function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const router = useRouter();
  const supabase = createClient();

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    const { error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    if (error) {
      setError(error.message);
      setLoading(false);
    } else {
      router.push('/app');
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-neutral-50 px-4">
      <Card className="w-full max-w-md">
        <div className="text-center mb-8">
          <h1 className="text-2xl font-bold text-neutral-900 mb-2">
            Welcome back
          </h1>
          <p className="text-sm text-neutral-600">
            Sign in to your PermitFlow account
          </p>
        </div>

        <form onSubmit={handleLogin} className="space-y-6">
          {error && (
            <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
              <p className="text-sm text-red-600">{error}</p>
            </div>
          )}

          <Input
            label="Email"
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            autoComplete="email"
          />

          <Input
            label="Password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            autoComplete="current-password"
          />

          <Button type="submit" className="w-full" disabled={loading}>
            {loading ? 'Signing in...' : 'Sign In'}
          </Button>
        </form>

        <div className="mt-6 text-center text-sm">
          <p className="text-neutral-600">
            Don't have an account?{' '}
            <Link href="/signup" className="text-primary-600 hover:text-primary-700 font-medium">
              Sign up
            </Link>
          </p>
        </div>
      </Card>
    </div>
  );
}

### `src/app/signup/page.tsx`
``````````````typescript
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import Link from 'next/link';
import { createClient } from '@/lib/supabase/client';
import { Button } from '@/components/ui/Button';
import { Input } from '@/components/ui/Input';
import { Card } from '@/components/ui/Card';

export default function SignupPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const router = useRouter();
  const supabase = createClient();

  const handleSignup = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    const { error } = await supabase.auth.signUp({
      email,
      password,
    });

    if (error) {
      setError(error.message);
      setLoading(false);
    } else {
      router.push('/app');
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-neutral-50 px-4">
      <Card className="w-full max-w-md">
        <div className="text-center mb-8">
          <h1 className="text-2xl font-bold text-neutral-900 mb-2">
            Start your free trial
          </h1>
          <p className="text-sm text-neutral-600">
            No credit card required • 14 days free
          </p>
        </div>

        <form onSubmit={handleSignup} className="space-y-6">
          {error && (
            <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
              <p className="text-sm text-red-600">{error}</p>
            </div>
          )}

          <Input
            label="Email"
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            required
            autoComplete="email"
          />

          <Input
            label="Password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            required
            autoComplete="new-password"
            placeholder="At least 8 characters"
          />

          <Button type="submit" className="w-full" disabled={loading}>
            {loading ? 'Creating account...' : 'Create Account'}
          </Button>

          <p className="text-xs text-neutral-500 text-center">
            By signing up, you agree to our Terms of Service and Privacy Policy
          </p>
        </form>

        <div className="mt-6 text-center text-sm">
          <p className="text-neutral-600">
            Already have an account?{' '}
            <Link href="/login" className="text-primary-600 hover:text-primary-700 font-medium">
              Sign in
            </Link>
          </p>
        </div>
      </Card>
    </div>
  );
}

### `src/app/app/layout.tsx`
`````````````typescript
import { AppHeader } from '@/components/layout/AppHeader';

export default function AppLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="min-h-screen bg-neutral-50">
      <AppHeader />
      <main>{children}</main>
    </div>
  );
}

### `src/app/app/page.tsx`
````````````typescript
import { createClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { Card } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';
import { Button } from '@/components/ui/Button';
import Link from 'next/link';
import { formatDate } from '@/lib/utils';

export default async function DashboardPage() {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect('/login');
  }

  // Fetch recent projects and analyses
  const { data: projects } = await supabase
    .from('projects')
    .select('*')
    .eq('user_id', user.id)
    .order('created_at', { ascending: false })
    .limit(5);

  const { data: analyses } = await supabase
    .from('analyses')
    .select('*, projects(name)')
    .eq('user_id', user.id)
    .order('created_at', { ascending: false })
    .limit(5);

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-neutral-900 mb-2">Dashboard</h1>
        <p className="text-neutral-600">Welcome back, {user.email}</p>
      </div>

      {/* Quick Stats */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <Card>
          <div className="text-sm text-neutral-600 mb-1">Total Projects</div>
          <div className="text-3xl font-bold text-neutral-900">{projects?.length || 0}</div>
        </Card>
        <Card>
          <div className="text-sm text-neutral-600 mb-1">Analyses Run</div>
          <div className="text-3xl font-bold text-neutral-900">{analyses?.length || 0}</div>
        </Card>
        <Card>
          <div className="text-sm text-neutral-600 mb-1">Avg Risk Score</div>
          <div className="text-3xl font-bold text-neutral-900">
            {analyses && analyses.length > 0
              ? Math.round(analyses.reduce((acc, a) => acc + (a.risk_score || 0), 0) / analyses.length)
              : '—'}
          </div>
        </Card>
        <Card>
          <div className="text-sm text-neutral-600 mb-1">Avg Approval Probability</div>
          <div className="text-3xl font-bold text-primary-600">
            {analyses && analyses.length > 0
              ? Math.round(analyses.reduce((acc, a) => acc + (a.approval_probability || 0), 0) / analyses.length) + '%'
              : '—'}
          </div>
        </Card>
      </div>

      {/* Quick Actions */}
      <Card className="mb-8">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-lg font-semibold text-neutral-900">Quick Actions</h2>
        </div>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          <Link href="/app/new-analysis">
            <Button className="w-full">
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
              </svg>
              New Risk Analysis
            </Button>
          </Link>
          <Link href="/app/projects">
            <Button variant="secondary" className="w-full">
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
              </svg>
              View All Projects
            </Button>
          </Link>
          <Link href="/app/jurisdictions">
            <Button variant="secondary" className="w-full">
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              </svg>
              Jurisdiction Library
            </Button>
          </Link>
        </div>
      </Card>

      {/* Recent Analyses */}
      <Card className="mb-8">
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-lg font-semibold text-neutral-900">Recent Analyses</h2>
          <Link href="/app/projects">
            <Button variant="ghost" size="sm">View All</Button>
          </Link>
        </div>
        {!analyses || analyses.length === 0 ? (
          <div className="text-center py-12">
            <svg className="w-12 h-12 text-neutral-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <p className="text-neutral-600 mb-4">No analyses yet</p>
            <Link href="/app/new-analysis">
              <Button>Run Your First Analysis</Button>
            </Link>
          </div>
        ) : (
          <div className="space-y-4">
            {analyses.map((analysis: any) => (
              <Link key={analysis.id} href={`/app/analysis/${analysis.id}`}>
                <div className="p-4 border border-neutral-200 rounded-lg hover:border-primary-500 transition-colors">
                  <div className="flex items-start justify-between">
                    <div className="flex-1">
                      <div className="flex items-center space-x-3 mb-2">
                        <h3 className="font-medium text-neutral-900">
                          {analysis.projects?.name || 'Unnamed Project'}
                        </h3>
                        <Badge 
                          variant={
                            analysis.risk_score < 40 ? 'success' :
                            analysis.risk_score < 70 ? 'warning' : 'danger'
                          }
                        >
                          Risk: {analysis.risk_score}
                        </Badge>
                      </div>
                      <p className="text-sm text-neutral-600 mb-2">
                        {analysis.summary?.substring(0, 120)}...
                      </p>
                      <div className="flex items-center space-x-4 text-xs text-neutral-500">
                        <span>{formatDate(analysis.created_at)}</span>
                        <span>•</span>
                        <span>{analysis.approval_probability}% approval probability</span>
                        <span>•</span>
                        <span>{analysis.expected_review_time_days} days</span>
                      </div>
                    </div>
                    <div className="ml-4">
                      <svg className="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                      </svg>
                    </div>
                  </div>
                </div>
              </Link>
            ))}
          </div>
        )}
      </Card>

      {/* Recent Projects */}
      <Card>
        <div className="flex items-center justify-between mb-6">
          <h2 className="text-lg font-semibold text-neutral-900">Recent Projects</h2>
          <Link href="/app/projects">
            <Button variant="ghost" size="sm">View All</Button>
          </Link>
        </div>
        {!projects || projects.length === 0 ? (
          <div className="text-center py-12">
            <p className="text-neutral-600">No projects yet</p>
          </div>
        ) : (
          <div className="space-y-3">
            {projects.map((project: any) => (
              <Link key={project.id} href={`/app/projects/${project.id}`}>
                <div className="p-4 border border-neutral-200 rounded-lg hover:border-primary-500 transition-colors">
                  <div className="flex items-center justify-between">
                    <div>
                      <h3 className="font-medium text-neutral-900">{project.name}</h3>
                      <p className="text-sm text-neutral-600">{project.city} • {project.project_type}</p>
                    </div>
                    <svg className="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                    </svg>
                  </div>
                </div>
              </Link>
            ))}
          </div>
        )}
      </Card>
    </div>
  );
}

### `src/app/app/new-analysis/page.tsx`
```````````typescript
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { createClient } from '@/lib/supabase/client';
import { Card } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import { Input } from '@/components/ui/Input';
import { Textarea } from '@/components/ui/Textarea';
import { Select } from '@/components/ui/Select';

export default function NewAnalysisPage() {
  const router = useRouter();
  const supabase = createClient();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [step, setStep] = useState(1);

  // Form state
  const [projectName, setProjectName] = useState('');
  const [address, setAddress] = useState('');
  const [city, setCity] = useState('');
  const [projectType, setProjectType] = useState('');
  const [scope, setScope] = useState('');
  const [inputText, setInputText] = useState('');
  const [jurisdiction, setJurisdiction] = useState('');
  const [permitType, setPermitType] = useState('');
  const [buildingType, setBuildingType] = useState('');

  const handleCreateProject = async () => {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return null;

    const { data, error } = await supabase
      .from('projects')
      .insert({
        user_id: user.id,
        name: projectName,
        address,
        city,
        project_type: projectType,
        scope,
      })
      .select()
      .single();

    if (error) throw error;
    return data;
  };

  const handleRunAnalysis = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    try {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) throw new Error('Not authenticated');

      // Create project
      const project = await handleCreateProject();
      if (!project) throw new Error('Failed to create project');

      // Run analysis via API
      const response = await fetch('/api/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          project_id: project.id,
          input_text: inputText,
          jurisdiction,
          permit_type: permitType,
          building_type: buildingType,
        }),
      });

      if (!response.ok) throw new Error('Analysis failed');

      const result = await response.json();
      router.push(`/app/analysis/${result.id}`);
    } catch (err: any) {
      setError(err.message || 'An error occurred');
      setLoading(false);
    }
  };

  return (
    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-neutral-900 mb-2">New Risk Analysis</h1>
        <p className="text-neutral-600">
          Create a project and run a compliance risk assessment
        </p>
      </div>

      {/* Step indicator */}
      <div className="flex items-center justify-center mb-8">
        <div className="flex items-center space-x-4">
          <div className={`flex items-center ${step >= 1 ? 'text-primary-600' : 'text-neutral-400'}`}>
            <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${step >= 1 ? 'border-primary-600 bg-primary-600 text-white' : 'border-neutral-300'}`}>
              1
            </div>
            <span className="ml-2 text-sm font-medium">Project Details</span>
          </div>
          <div className="w-16 h-0.5 bg-neutral-300"></div>
          <div className={`flex items-center ${step >= 2 ? 'text-primary-600' : 'text-neutral-400'}`}>
            <div className={`w-8 h-8 rounded-full flex items-center justify-center border-2 ${step >= 2 ? 'border-primary-600 bg-primary-600 text-white' : 'border-neutral-300'}`}>
              2
            </div>
            <span className="ml-2 text-sm font-medium">Analysis Input</span>
          </div>
        </div>
      </div>

      <form onSubmit={handleRunAnalysis}>
        {step === 1 && (
          <Card>
            <h2 className="text-xl font-semibold text-neutral-900 mb-6">Project Information</h2>
            
            {error && (
              <div className="mb-6 p-3 bg-red-50 border border-red-200 rounded-lg">
                <p className="text-sm text-red-600">{error}</p>
              </div>
            )}

            <div className="space-y-6">
              <Input
                label="Project Name"
                value={projectName}
                onChange={(e) => setProjectName(e.target.value)}
                placeholder="e.g., 123 Main St ADU"
                required
              />

              <Input
                label="Address"
                value={address}
                onChange={(e) => setAddress(e.target.value)}
                placeholder="123 Main Street"
                required
              />

              <Input
                label="City"
                value={city}
                onChange={(e) => setCity(e.target.value)}
                placeholder="San Jose"
                required
              />

              <Select
                label="Project Type"
                value={projectType}
                onChange={(e) => setProjectType(e.target.value)}
                options={[
                  { value: '', label: 'Select project type' },
                  { value: 'New Construction', label: 'New Construction' },
                  { value: 'Addition', label: 'Addition' },
                  { value: 'Remodel', label: 'Remodel' },
                  { value: 'ADU', label: 'Accessory Dwelling Unit (ADU)' },
                  { value: 'Commercial TI', label: 'Commercial Tenant Improvement' },
                ]}
                required
              />

              <Textarea
                label="Scope of Work"
                value={scope}
                onChange={(e) => setScope(e.target.value)}
                placeholder="Brief description of the project scope..."
                required
              />

              <div className="flex justify-end">
                <Button type="button" onClick={() => setStep(2)}>
                  Continue to Analysis Input
                </Button>
              </div>
            </div>
          </Card>
        )}

        {step === 2 && (
          <Card>
            <div className="flex items-center justify-between mb-6">
              <h2 className="text-xl font-semibold text-neutral-900">Analysis Input</h2>
              <Button type="button" variant="ghost" size="sm" onClick={() => setStep(1)}>
                ← Back
              </Button>
            </div>

            <div className="space-y-6">
              <Textarea
                label="Project Details / Plan Notes"
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
                placeholder="Paste plan notes, checklist, or describe the project details...&#10;&#10;Example:&#10;- 800 sq ft ADU with 2 bedrooms&#10;- Setback from property line: 18 feet&#10;- Two-story structure&#10;- Includes new foundation and utilities"
                rows={8}
                required
              />

              <Select
                label="Jurisdiction"
                value={jurisdiction}
                onChange={(e) => setJurisdiction(e.target.value)}
                options={[
                  { value: '', label: 'Select jurisdiction' },
                  { value: 'San Jose', label: 'San Jose, CA' },
                  { value: 'San Francisco', label: 'San Francisco, CA' },
                  { value: 'Oakland', label: 'Oakland, CA' },
                  { value: 'San Mateo', label: 'San Mateo, CA' },
                  { value: 'Santa Clara', label: 'Santa Clara, CA' },
                ]}
              />

              <Select
                label="Permit Type"
                value={permitType}
                onChange={(e) => setPermitType(e.target.value)}
                options={[
                  { value: '', label: 'Select permit type' },
                  { value: 'Building', label: 'Building Permit' },
                  { value: 'Structural', label: 'Structural Permit' },
                  { value: 'Electrical', label: 'Electrical Permit' },
                  { value: 'Plumbing', label: 'Plumbing Permit' },
                  { value: 'Mechanical', label: 'Mechanical Permit' },
                ]}
              />

              <Select
                label="Building Type"
                value={buildingType}
                onChange={(e) => setBuildingType(e.target.value)}
                options={[
                  { value: '', label: 'Select building type' },
                  { value: 'Residential - Single Family', label: 'Residential - Single Family' },
                  { value: 'Residential - Multi Family', label: 'Residential - Multi Family' },
                  { value: 'Commercial', label: 'Commercial' },
                  { value: 'Mixed Use', label: 'Mixed Use' },
                  { value: 'Industrial', label: 'Industrial' },
                ]}
              />

              <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <div className="flex">
                  <svg className="w-5 h-5 text-yellow-600 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                  <div>
                    <p className="text-sm font-medium text-yellow-800 mb-1">Disclaimer</p>
                    <p className="text-sm text-yellow-700">
                      This is a decision support tool, not legal advice. Code compliance requirements vary by jurisdiction. Final permit authority remains with the jurisdiction AHJ. Consult licensed professionals for project-specific guidance.
                    </p>
                  </div>
                </div>
              </div>

              <div className="flex justify-end space-x-4">
                <Button type="button" variant="secondary" onClick={() => setStep(1)}>
                  Back
                </Button>
                <Button type="submit" disabled={loading}>
                  {loading ? 'Analyzing...' : 'Run Analysis'}
                </Button>
              </div>
            </div>
          </Card>
        )}
      </form>
    </div>
  );
}

### `src/app/app/analysis/[id]/page.tsx`
``````````typescript
import { createClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { Card } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';
import { Button } from '@/components/ui/Button';
import { getSeverityColor, getConfidenceColor, formatDate } from '@/lib/utils';
import Link from 'next/link';

export default async function AnalysisPage({ params }: { params: { id: string } }) {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect('/login');
  }

  const { data: analysis } = await supabase
    .from('analyses')
    .select('*, projects(*)')
    .eq('id', params.id)
    .eq('user_id', user.id)
    .single();

  if (!analysis) {
    redirect('/app');
  }

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* Header */}
      <div className="mb-8">
        <div className="flex items-center text-sm text-neutral-600 mb-4">
          <Link href="/app" className="hover:text-neutral-900">Dashboard</Link>
          <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
          </svg>
          <Link href={`/app/projects/${analysis.project_id}`} className="hover:text-neutral-900">
            {analysis.projects?.name}
          </Link>
          <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
          </svg>
          <span>Analysis</span>
        </div>

        <div className="flex items-start justify-between">
          <div>
            <h1 className="text-3xl font-bold text-neutral-900 mb-2">Risk Analysis Results</h1>
            <p className="text-neutral-600">
              Generated on {formatDate(analysis.created_at)}
            </p>
          </div>
          <a href={`/api/export/${analysis.id}`} target="_blank" rel="noopener noreferrer">
            <Button variant="secondary">
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              Export PDF
            </Button>
          </a>
        </div>
      </div>

      {/* Summary Cards */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <Card>
          <div className="text-sm text-neutral-600 mb-2">Risk Score</div>
          <div className="flex items-baseline">
            <div className={`text-4xl font-bold ${
              analysis.risk_score < 40 ? 'text-green-600' :
              analysis.risk_score < 70 ? 'text-yellow-600' : 'text-red-600'
            }`}>
              {analysis.risk_score}
            </div>
            <div className="text-neutral-500 ml-1">/100</div>
          </div>
        </Card>

        <Card>
          <div className="text-sm text-neutral-600 mb-2">Approval Probability</div>
          <div className="flex items-baseline">
            <div className="text-4xl font-bold text-primary-600">
              {analysis.approval_probability}%
            </div>
          </div>
        </Card>

        <Card>
          <div className="text-sm text-neutral-600 mb-2">Expected Review Time</div>
          <div className="flex items-baseline">
            <div className="text-4xl font-bold text-neutral-900">
              {analysis.expected_review_time_days}
            </div>
            <div className="text-neutral-500 ml-2">days</div>
          </div>
        </Card>

        <Card>
          <div className="text-sm text-neutral-600 mb-2">Confidence Level</div>
          <Badge className={`${getConfidenceColor(analysis.confidence_level)} mt-2`}>
            {analysis.confidence_level.charAt(0).toUpperCase() + analysis.confidence_level.slice(1)}
          </Badge>
        </Card>
      </div>

      {/* Executive Summary */}
      <Card className="mb-8">
        <h2 className="text-xl font-semibold text-neutral-900 mb-4">Executive Summary</h2>
        <p className="text-neutral-700 leading-relaxed">{analysis.summary}</p>
      </Card>

      {/* Top Risk Factors */}
      <Card className="mb-8">
        <h2 className="text-xl font-semibold text-neutral-900 mb-6">Identified Risk Factors</h2>
        <div className="space-y-6">
          {analysis.top_risks?.map((risk: any, index: number) => (
            <div key={index} className="border-l-4 border-neutral-200 pl-6 pb-6 last:pb-0">
              <div className="flex items-start justify-between mb-3">
                <div>
                  <h3 className="text-lg font-semibold text-neutral-900 mb-2">{risk.title}</h3>
                  <Badge className={getSeverityColor(risk.severity)}>
                    {risk.severity.charAt(0).toUpperCase() + risk.severity.slice(1)} Severity
                  </Badge>
                </div>
                {risk.code_refs && risk.code_refs.length > 0 && (
                  <div className="text-sm text-neutral-600">
                    {risk.code_refs.map((ref: string, i: number) => (
                      <Badge key={i} variant="default" className="ml-2">
                        {ref}
                      </Badge>
                    ))}
                  </div>
                )}
              </div>

              <p className="text-neutral-700 mb-4">{risk.explanation}</p>

              <div>
                <h4 className="text-sm font-semibold text-neutral-900 mb-2">Recommended Actions:</h4>
                <ul className="space-y-2">
                  {risk.fix_recommendations?.map((rec: string, i: number) => (
                    <li key={i} className="flex items-start text-sm text-neutral-700">
                      <svg className="w-5 h-5 text-primary-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      {rec}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          ))}
        </div>
      </Card>

      {/* Jurisdiction Flags */}
      {analysis.jurisdiction_flags && analysis.jurisdiction_flags.length > 0 && (
        <Card>
          <h2 className="text-xl font-semibold text-neutral-900 mb-6">Jurisdiction-Specific Considerations</h2>
          <div className="space-y-6">
            {analysis.jurisdiction_flags.map((flag: any, index: number) => (
              <div key={index} className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <h3 className="font-semibold text-blue-900 mb-2">{flag.flag}</h3>
                <p className="text-sm text-blue-800 mb-3">{flag.why_it_matters}</p>
                <div className="bg-white border border-blue-200 rounded p-3">
                  <p className="text-sm font-medium text-blue-900 mb-1">Recommended Mitigation:</p>
                  <p className="text-sm text-blue-800">{flag.mitigation}</p>
                </div>
              </div>
            ))}
          </div>
        </Card>
      )}

      {/* Disclaimer */}
      <div className="mt-8 p-4 bg-neutral-100 border border-neutral-200 rounded-lg">
        <p className="text-xs text-neutral-600">
          <strong>Disclaimer:</strong> This analysis is a decision support tool based on common code requirements and jurisdiction patterns. It is not legal advice, and final permit authority remains with the jurisdiction AHJ. Code compliance requirements vary by jurisdiction and project specifics. Always consult with licensed professionals for project-specific guidance.
        </p>
      </div>
    </div>
  );
}

### `src/app/app/projects/page.tsx`
`````````typescript
import { createClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { Card } from '@/components/ui/Card';
import { Button } from '@/components/ui/Button';
import Link from 'next/link';
import { formatDate } from '@/lib/utils';

export default async function ProjectsPage() {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect('/login');
  }

  const { data: projects } = await supabase
    .from('projects')
    .select('*, analyses(count)')
    .eq('user_id', user.id)
    .order('created_at', { ascending: false });

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex items-center justify-between mb-8">
        <div>
          <h1 className="text-3xl font-bold text-neutral-900 mb-2">Projects</h1>
          <p className="text-neutral-600">Manage your permit projects and analyses</p>
        </div>
        <Link href="/app/new-analysis">
          <Button>
            <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
            </svg>
            New Project
          </Button>
        </Link>
      </div>

      {!projects || projects.length === 0 ? (
        <Card className="text-center py-16">
          <svg className="w-16 h-16 text-neutral-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
          </svg>
          <h3 className="text-lg font-semibold text-neutral-900 mb-2">No projects yet</h3>
          <p className="text-neutral-600 mb-6">Create your first project to get started with risk analysis</p>
          <Link href="/app/new-analysis">
            <Button>Create Project</Button>
          </Link>
        </Card>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {projects.map((project: any) => (
            <Link key={project.id} href={`/app/projects/${project.id}`}>
              <Card className="h-full hover:border-primary-500 transition-colors cursor-pointer">
                <div className="flex items-start justify-between mb-4">
                  <h3 className="text-lg font-semibold text-neutral-900">{project.name}</h3>
                  <svg className="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </div>
                
                <div className="space-y-2 text-sm text-neutral-600 mb-4">
                  <div className="flex items-center">
                    <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    </svg>
                    {project.city}
                  </div>
                  <div className="flex items-center">
                    <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    {project.project_type}
                  </div>
                </div>
                
                <div className="pt-4 border-t border-neutral-200 flex items-center justify-between">
                  <span className="text-xs text-neutral-500">{formatDate(project.created_at)}</span>
                  <span className="text-xs text-primary-600 font-medium">
                    {project.analyses?.[0]?.count || 0} analyses
                  </span>
                </div>
              </Card>
            </Link>
          ))}
        </div>
      )}
    </div>
  );
}

### `src/app/app/projects/[id]/page.tsx`
````````typescript
import { createClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { Card } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';
import { Button } from '@/components/ui/Button';
import Link from 'next/link';
import { formatDate } from '@/lib/utils';

export default async function ProjectDetailPage({ params }: { params: { id: string } }) {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect('/login');
  }

  const { data: project } = await supabase
    .from('projects')
    .select('*')
    .eq('id', params.id)
    .eq('user_id', user.id)
    .single();

  if (!project) {
    redirect('/app/projects');
  }

  const { data: analyses } = await supabase
    .from('analyses')
    .select('*')
    .eq('project_id', params.id)
    .order('created_at', { ascending: false });

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="flex items-center text-sm text-neutral-600 mb-6">
        <Link href="/app" className="hover:text-neutral-900">Dashboard</Link>
        <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
        </svg>
        <Link href="/app/projects" className="hover:text-neutral-900">Projects</Link>
        <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
        </svg>
        <span>{project.name}</span>
      </div>

      {/* Project Info */}
      <Card className="mb-8">
        <div className="flex items-start justify-between mb-6">
          <div>
            <h1 className="text-3xl font-bold text-neutral-900 mb-2">{project.name}</h1>
            <div className="flex items-center space-x-4 text-sm text-neutral-600">
              <span>{project.address}</span>
              <span>•</span>
              <span>{project.city}</span>
              <span>•</span>
              <span>{project.project_type}</span>
            </div>
          </div>
        </div>

        <div className="border-t border-neutral-200 pt-6">
          <h3 className="text-sm font-semibold text-neutral-900 mb-2">Scope of Work</h3>
          <p className="text-neutral-700">{project.scope}</p>
        </div>

        <div className="mt-6 pt-6 border-t border-neutral-200 flex items-center justify-between">
          <span className="text-sm text-neutral-600">Created {formatDate(project.created_at)}</span>
          <Link href="/app/new-analysis">
            <Button>
              <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
              </svg>
              New Analysis
            </Button>
          </Link>
        </div>
      </Card>

      {/* Analyses */}
      <Card>
        <h2 className="text-xl font-semibold text-neutral-900 mb-6">Analysis History</h2>
        {!analyses || analyses.length === 0 ? (
          <div className="text-center py-12">
            <svg className="w-12 h-12 text-neutral-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
            <p className="text-neutral-600 mb-4">No analyses for this project yet</p>
            <Link href="/app/new-analysis">
              <Button>Run First Analysis</Button>
            </Link>
          </div>
        ) : (
          <div className="space-y-4">
            {analyses.map((analysis: any) => (
              <Link key={analysis.id} href={`/app/analysis/${analysis.id}`}>
                <div className="p-4 border border-neutral-200 rounded-lg hover:border-primary-500 transition-colors">
                  <div className="flex items-start justify-between mb-3">
                    <div className="flex items-center space-x-3">
                      <Badge 
                        variant={
                          analysis.risk_score < 40 ? 'success' :
                          analysis.risk_score < 70 ? 'warning' : 'danger'
                        }
                      >
                        Risk: {analysis.risk_score}
                      </Badge>
                      <Badge variant="info">
                        {analysis.approval_probability}% approval
                      </Badge>
                    </div>
                    <span className="text-sm text-neutral-600">{formatDate(analysis.created_at)}</span>
                  </div>
                  
                  <p className="text-sm text-neutral-700 mb-2">
                    {analysis.summary?.substring(0, 150)}...
                  </p>
                  
                  <div className="flex items-center space-x-4 text-xs text-neutral-500">
                    <span>{analysis.expected_review_time_days} days review time</span>
                    <span>•</span>
                    <span>{analysis.top_risks?.length || 0} risk factors identified</span>
                  </div>
                </div>
              </Link>
            ))}
          </div>
        )}
      </Card>
    </div>
  );
}

### `src/app/app/jurisdictions/page.tsx`
```````typescript
import { createClient } from '@/lib/supabase/server';
import { redirect } from 'next/navigation';
import { Card } from '@/components/ui/Card';
import { Badge } from '@/components/ui/Badge';

export default async function JurisdictionsPage() {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect('/login');
  }

  const { data: jurisdictions } = await supabase
    .from('jurisdictions')
    .select('*')
    .order('name');

  return (
    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-neutral-900 mb-2">Jurisdiction Library</h1>
        <p className="text-neutral-600">
          Review patterns, typical cycle times, and submission requirements for major jurisdictions
        </p>
      </div>

      {!jurisdictions || jurisdictions.length === 0 ? (
        <Card className="text-center py-16">
          <p className="text-neutral-600">No jurisdiction data available</p>
        </Card>
      ) : (
        <div className="grid grid-cols-1 gap-6">
          {jurisdictions.map((jurisdiction: any) => (
            <Card key={jurisdiction.id}>
              <div className="flex items-start justify-between mb-6">
                <div>
                  <h2 className="text-2xl font-bold text-neutral-900 mb-1">{jurisdiction.name}</h2>
                  <p className="text-neutral-600">{jurisdiction.city}, {jurisdiction.state}</p>
                </div>
                <Badge variant="info">
                  {jurisdiction.typical_cycle_time_min}-{jurisdiction.typical_cycle_time_max} days
                </Badge>
              </div>

              <div className="grid md:grid-cols-2 gap-8">
                <div>
                  <h3 className="text-sm font-semibold text-neutral-900 mb-3">Common Rejection Themes</h3>
                  <ul className="space-y-2">
                    {jurisdiction.common_rejection_themes?.map((theme: string, i: number) => (
                      <li key={i} className="flex items-start text-sm text-neutral-700">
                        <svg className="w-5 h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        {theme}
                      </li>
                    ))}
                  </ul>
                </div>

                <div>
                  <h3 className="text-sm font-semibold text-neutral-900 mb-3">Submission Checklist</h3>
                  <ul className="space-y-2">
                    {jurisdiction.submission_checklist?.map((item: string, i: number) => (
                      <li key={i} className="flex items-start text-sm text-neutral-700">
                        <svg className="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              </div>

              <div className="mt-6 pt-6 border-t border-neutral-200">
                <p className="text-xs text-neutral-500">
                  Data represents typical patterns and may vary based on project specifics. Always verify requirements with jurisdiction directly.
                </p>
              </div>
            </Card>
          ))}
        </div>
      )}
    </div>
  );
}

### `src/app/app/settings/page.tsx`
``````typescript
'use client';

import { useState, useEffect } from 'react';
import { createClient } from '@/lib/supabase/client';
import { Card } from '@/components/ui/Card';
import { Input } from '@/components/ui/Input';
import { Button } from '@/components/ui/Button';

export default function SettingsPage() {
  const supabase = createClient();
  const [user, setUser] = useState<any>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const getUser = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      setUser(user);
      setLoading(false);
    };
    getUser();
  }, [supabase]);

  if (loading) {
    return (
      <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <p className="text-neutral-600">Loading...</p>
      </div>
    );
  }

  return (
    <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div className="mb-8">
        <h1 className="text-3xl font-bold text-neutral-900 mb-2">Settings</h1>
        <p className="text-neutral-600">Manage your account and preferences</p>
      </div>

      {/* Profile */}
      <Card className="mb-6">
        <h2 className="text-xl font-semibold text-neutral-900 mb-6">Profile</h2>
        <div className="space-y-6">
          <Input
            label="Email"
            type="email"
            value={user?.email || ''}
            disabled
          />
          <p className="text-sm text-neutral-600">
            To change your email address, please contact support.
          </p>
        </div>
      </Card>

      {/* Billing */}
      <Card className="mb-6">
        <h2 className="text-xl font-semibold text-neutral-900 mb-6">Billing</h2>
        <div className="bg-neutral-50 border border-neutral-200 rounded-lg p-6">
          <div className="flex items-start justify-between mb-4">
            <div>
              <h3 className="font-semibold text-neutral-900 mb-1">Free Trial</h3>
              <p className="text-sm text-neutral-600">14 days remaining</p>
            </div>
            <Badge variant="success">Active</Badge>
          </div>
          <p className="text-sm text-neutral-600 mb-4">
            Your trial includes 10 risk analyses per month and access to all core features.
          </p>
          <Button>Upgrade to Professional</Button>
        </div>
      </Card>

      {/* Danger Zone */}
      <Card className="border-red-200">
        <h2 className="text-xl font-semibold text-neutral-900 mb-6">Danger Zone</h2>
        <div className="space-y-4">
          <div className="flex items-center justify-between p-4 border border-red-200 rounded-lg">
            <div>
              <h3 className="font-medium text-neutral-900">Delete Account</h3>
              <p className="text-sm text-neutral-600">
                Permanently delete your account and all associated data
              </p>
            </div>
            <Button variant="danger" size="sm">Delete</Button>
          </div>
        </div>
      </Card>
    </div>
  );
}

### `src/app/api/analyze/route.ts`
`````typescript
import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { generateMockAnalysis } from '@/lib/analyzers/mock-analyzer';
import { generateOpenAIAnalysis } from '@/lib/analyzers/openai-analyzer';

export async function POST(request: NextRequest) {
  try {
    const supabase = await createClient();
    const { data: { user } } = await supabase.auth.getUser();

    if (!user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { project_id, input_text, jurisdiction, permit_type, building_type, file_url } = body;

    if (!project_id || (!input_text && !file_url)) {
      return NextResponse.json(
        { error: 'Missing required fields' },
        { status: 400 }
      );
    }

    // Verify project ownership
    const { data: project } = await supabase
      .from('projects')
      .select('*')
      .eq('id', project_id)
      .eq('user_id', user.id)
      .single();

    if (!project) {
      return NextResponse.json({ error: 'Project not found' }, { status: 404 });
    }

    // Generate analysis
    let analysisResult;
    try {
      // Try OpenAI first if API key is available
      if (process.env.OPENAI_API_KEY) {
        analysisResult = await generateOpenAIAnalysis({
          projectType: project.project_type,
          buildingType,
          jurisdiction,
          permitType: permit_type,
          inputText: input_text,
        });
      } else {
        throw new Error('OpenAI not configured');
      }
    } catch (error) {
      // Fall back to mock analyzer
      console.log('Using mock analyzer:', error);
      analysisResult = await generateMockAnalysis({
        projectType: project.project_type,
        buildingType,
        jurisdiction,
        permitType: permit_type,
        inputText: input_text,
      });
    }

    // Store analysis in database
    const { data: analysis, error: insertError } = await supabase
      .from('analyses')
      .insert({
        project_id,
        user_id: user.id,
        input_text,
        file_url,
        jurisdiction,
        permit_type,
        building_type,
        risk_score: analysisResult.risk_score,
        approval_probability: analysisResult.approval_probability,
        expected_review_time_days: analysisResult.expected_review_time_days,
        confidence_level: analysisResult.confidence_level,
        summary: analysisResult.summary,
        top_risks: analysisResult.top_risks,
        jurisdiction_flags: analysisResult.jurisdiction_flags,
      })
      .select()
      .single();

    if (insertError) {
      console.error('Insert error:', insertError);
      return NextResponse.json({ error: 'Failed to save analysis' }, { status: 500 });
    }

    // Log audit event
    await supabase.from('audit_logs').insert({
      user_id: user.id,
      event_type: 'analysis_created',
      event_data: { analysis_id: analysis.id, project_id },
    });

    return NextResponse.json(analysis);
  } catch (error: any) {
    console.error('Analysis error:', error);
    return NextResponse.json(
      { error: error.message || 'Internal server error' },
      { status: 500 }
    );
  }
}

### `src/app/api/export/[id]/route.ts`
````typescript
import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';

export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const supabase = await createClient();
    const { data: { user } } = await supabase.auth.getUser();

    if (!user) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { data: analysis } = await supabase
      .from('analyses')
      .select('*, projects(*)')
      .eq('id', params.id)
      .eq('user_id', user.id)
      .single();

    if (!analysis) {
      return NextResponse.json({ error: 'Analysis not found' }, { status: 404 });
    }

    // Generate simple HTML report
    const html = `
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Risk Analysis Report - ${analysis.projects.name}</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 0 20px; color: #333; }
    h1 { color: #0369a1; margin-bottom: 10px; }
    h2 { color: #0369a1; margin-top: 30px; margin-bottom: 15px; border-bottom: 2px solid #e5e5e5; padding-bottom: 10px; }
    .header { margin-bottom: 40px; }
    .meta { color: #666; font-size: 14px; }
    .summary-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 30px 0; }
    .summary-card { border: 1px solid #e5e5e5; padding: 15px; border-radius: 8px; }
    .summary-card .label { font-size: 12px; color: #666; margin-bottom: 5px; }
    .summary-card .value { font-size: 32px; font-weight: bold; }
    .risk-item { margin-bottom: 30px; padding-left: 20px; border-left: 4px solid #e5e5e5; }
    .risk-title { font-weight: bold; font-size: 18px; margin-bottom: 10px; }
    .severity { display: inline-block; padding: 4px 12px; border-radius: 4px; font-size: 12px; font-weight: bold; margin-bottom: 10px; }
    .severity-low { background: #dcfce7; color: #166534; }
    .severity-medium { background: #fef3c7; color: #92400e; }
    .severity-high { background: #fed7aa; color: #9a3412; }
    .severity-critical { background: #fee2e2; color: #991b1b; }
    .recommendation { margin-top: 10px; }
    .recommendation ul { margin: 10px 0; padding-left: 20px; }
    .disclaimer { background: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 40px; font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Permit Risk Analysis Report</h1>
    <div class="meta">
      <p><strong>Project:</strong> ${analysis.projects.name}</p>
      <p><strong>Location:</strong> ${analysis.projects.address}, ${analysis.projects.city}</p>
      <p><strong>Project Type:</strong> ${analysis.projects.project_type}</p>
      <p><strong>Generated:</strong> ${new Date(analysis.created_at).toLocaleDateString()}</p>
    </div>
  </div>

  <div class="summary-grid">
    <div class="summary-card">
      <div class="label">Risk Score</div>
      <div class="value">${analysis.risk_score}</div>
    </div>
    <div class="summary-card">
      <div class="label">Approval Probability</div>
      <div class="value">${analysis.approval_probability}%</div>
    </div>
    <div class="summary-card">
      <div class="label">Review Time</div>
      <div class="value">${analysis.expected_review_time_days}d</div>
    </div>
    <div class="summary-card">
      <div class="label">Confidence</div>
      <div class="value">${analysis.confidence_level}</div>
    </div>
  </div>

  <h2>Executive Summary</h2>
  <p>${analysis.summary}</p>

  <h2>Identified Risk Factors</h2>
  ${analysis.top_risks.map((risk: any) => `
    <div class="risk-item">
      <div class="risk-title">${risk.title}</div>
      <span class="severity severity-${risk.severity}">${risk.severity.toUpperCase()}</span>
      <p>${risk.explanation}</p>
      <div class="recommendation">
        <strong>Recommended Actions:</strong>
        <ul>
          ${risk.fix_recommendations.map((rec: string) => `<li>${rec}</li>`).join('')}
        </ul>
      </div>
    </div>
  `).join('')}

  ${analysis.jurisdiction_flags && analysis.jurisdiction_flags.length > 0 ? `
    <h2>Jurisdiction-Specific Considerations</h2>
    ${analysis.jurisdiction_flags.map((flag: any) => `
      <div class="risk-item">
        <div class="risk-title">${flag.flag}</div>
        <p>${flag.why_it_matters}</p>
        <p><strong>Mitigation:</strong> ${flag.mitigation}</p>
      </div>
    `).join('')}
  ` : ''}

  <div class="disclaimer">
    <strong>Disclaimer:</strong> This analysis is a decision support tool based on common code requirements and jurisdiction patterns. 
    It is not legal advice, and final permit authority remains with the jurisdiction AHJ. Code compliance requirements vary by 
    jurisdiction and project specifics. Always consult with licensed professionals for project-specific guidance.
  </div>
</body>
</html>
    `;

    // Log audit event
    await supabase.from('audit_logs').insert({
      user_id: user.id,
      event_type: 'analysis_exported',
      event_data: { analysis_id: analysis.id },
    });

    return new NextResponse(html, {
      headers: {
        'Content-Type': 'text/html',
        'Content-Disposition': `attachment; filename="analysis-${params.id}.html"`,
      },
    });
  } catch (error: any) {
    console.error('Export error:', error);
    return NextResponse.json(
      { error: error.message || 'Internal server error' },
      { status: 500 }
    );
  }
}

### `supabase/migrations/001_initial_schema.sql`
```sql
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Projects table
CREATE TABLE projects (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  address TEXT NOT NULL,
  city TEXT NOT NULL,
  project_type TEXT NOT NULL,
  scope TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Analyses table
CREATE TABLE analyses (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  input_text TEXT,
  file_url TEXT,
  jurisdiction TEXT,
  permit_type TEXT,
  building_type TEXT,
  risk_score INTEGER NOT NULL,
  approval_probability INTEGER NOT NULL,
  expected_review_time_days INTEGER NOT NULL,
  confidence_level TEXT NOT NULL CHECK (confidence_level IN ('low', 'medium', 'high')),
  summary TEXT NOT NULL,
  top_risks JSONB NOT NULL DEFAULT '[]',
  jurisdiction_flags JSONB NOT NULL DEFAULT '[]',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Jurisdictions table
CREATE TABLE jurisdictions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  city TEXT NOT NULL,
  state TEXT NOT NULL,
  typical_cycle_time_min INTEGER NOT NULL,
  typical_cycle_time_max INTEGER NOT NULL,
  common_rejection_themes JSONB NOT NULL DEFAULT '[]',
  submission_checklist JSONB NOT NULL DEFAULT '[]',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Audit logs table
CREATE TABLE audit_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  event_type TEXT NOT NULL,
  event_data JSONB,
  ip_address TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_projects_user_id ON projects(user_id);
CREATE INDEX idx_analyses_project_id ON analyses(project_id);
CREATE INDEX idx_analyses_user_id ON analyses(user_id);
CREATE INDEX idx_audit_logs_user_id ON audit_logs(user_id);
CREATE INDEX idx_audit_logs_created_at ON audit_logs(created_at);

-- Row Level Security (RLS) policies
ALTER TABLE projects ENABLE ROW LEVEL SECURITY;
ALTER TABLE analyses ENABLE ROW LEVEL SECURITY;
ALTER TABLE audit_logs ENABLE ROW LEVEL SECURITY;

-- Projects policies
CREATE POLICY "Users can view their own projects" ON projects
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can create their own projects" ON projects
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own projects" ON projects
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete their own projects" ON projects
  FOR DELETE USING (auth.uid() = user_id);

-- Analyses policies
CREATE POLICY "Users can view their own analyses" ON analyses
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can create their own analyses" ON analyses
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete their own analyses" ON analyses
  FOR DELETE USING (auth.uid() = user_id);

-- Audit logs policies (read-only for users)
CREATE POLICY "Users can view their own audit logs" ON audit_logs
  FOR SELECT USING (auth.uid() = user_id);

-- Jurisdictions policies (public read)
ALTER TABLE jurisdictions ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Anyone can view jurisdictions" ON jurisdictions
  FOR SELECT TO authenticated USING (true);

-- Seed data for jurisdictions
INSERT INTO jurisdictions (name, city, state, typical_cycle_time_min, typical_cycle_time_max, common_rejection_themes, submission_checklist) VALUES
(
  'City of San Jose Building Department',
  'San Jose',
  'CA',
  35,
  75,
  '[
    "Setback requirement violations (especially for ADUs)",
    "Incomplete Title 24 energy compliance documentation",
    "Missing structural engineer stamps on foundation plans",
    "Stormwater management plans not meeting C.3 requirements",
    "Fire egress window specifications incomplete"
  ]'::jsonb,
  '[
    "Complete architectural plan set with all dimensions",
    "Structural calculations with engineer stamp",
    "Title 24 energy compliance forms (CF-1R)",
    "Plot plan showing setbacks and easements",
    "Stormwater management plan (projects >2,500 sq ft)",
    "Sanitary sewer lateral compliance",
    "Fire sprinkler plans (if required)",
    "Building permit application form"
  ]'::jsonb
),
(
  'San Francisco Department of Building Inspection',
  'San Francisco',
  'CA',
  45,
  90,
  '[
    "Unpermitted existing work requiring legalization",
    "Dwelling unit legalization issues",
    "Planning department approval delays",
    "Historic preservation requirements",
    "Seismic upgrade requirements for older buildings"
  ]'::jsonb,
  '[
    "Planning department approval (if required)",
    "Complete permit application with project description",
    "Architectural drawings stamped by California architect",
    "Structural drawings stamped by California engineer",
    "Energy calculations and compliance forms",
    "Geotechnical report (for foundations)",
    "Historical review (if in historic district)",
    "Neighbor notification proof"
  ]'::jsonb
),
(
  'City of Oakland Building Services',
  'Oakland',
  'CA',
  40,
  80,
  '[
    "Seismic retrofit requirements frequently missed",
    "Soft-story building requirements",
    "Green building requirements documentation",
    "Fire access and fire flow requirements",
    "Accessible route compliance"
  ]'::jsonb,
  '[
    "Building permit application",
    "Plot plan with building location and setbacks",
    "Architectural plans (stamped if over certain size)",
    "Structural plans with engineer stamp",
    "Energy compliance documentation",
    "Fire sprinkler plans (if required)",
    "Green building checklist (if required)",
    "Soils report for new foundations"
  ]'::jsonb
);

-- Function to update updated_at timestamp
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$ LANGUAGE plpgsql;

-- Trigger for projects updated_at
CREATE TRIGGER update_projects_updated_at
  BEFORE UPDATE ON projects
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

---

## 🚀 Setup Instructions

### Prerequisites

- Node.js 18+ and npm/yarn installed
- A Supabase account ([supabase.com](https://supabase.com))
- OpenAI API key (optional - will use mock analyzer if not provided)

### 1. Create a Supabase Project

1. Go to [supabase.com](https://supabase.com) and create a new project
2. Wait for the project to be provisioned (takes 1-2 minutes)
3. Go to Project Settings > API to find your:
   - Project URL (`NEXT_PUBLIC_SUPABASE_URL`)
   - Anon/Public key (`NEXT_PUBLIC_SUPABASE_ANON_KEY`)
   - Service Role key (`SUPABASE_SERVICE_ROLE_KEY`) - **keep this secret!**

### 2. Run Database Migration

1. In your Supabase project dashboard, go to the SQL Editor
2. Click "New Query"
3. Copy and paste the entire contents of `supabase/migrations/001_initial_schema.sql`
4. Click "Run" to execute the migration
5. Verify tables were created by checking the Table Editor

### 3. Clone and Install
```bash
# Install dependencies
npm install

# Or with yarn
yarn install
```

### 4. Configure Environment Variables

Create a `.env.local` file in the project root:
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# OpenAI (optional - will use mock analyzer if not provided)
OPENAI_API_KEY=sk-your-openai-key-here

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 5. Run Development Server
```bash
npm run dev
# Or
yarn dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### 6. Create Your First Account

1. Navigate to `/signup`
2. Create an account with email/password
3. You'll be automatically logged in and redirected to `/app`

---

## 📦 Deployment to Vercel

### 1. Push to GitHub
```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin YOUR_GITHUB_REPO_URL
git push -u origin main
```

### 2. Deploy to Vercel

1. Go to [vercel.com](https://vercel.com) and sign in
2. Click "New Project"
3. Import your GitHub repository
4. Configure environment variables:
   - Add all variables from `.env.local`
   - Make sure to use your production Supabase credentials
5. Click "Deploy"

### 3. Configure Custom Domain (Optional)

1. Go to Project Settings > Domains
2. Add your custom domain
3. Follow Vercel's instructions to configure DNS

---

## 🔒 Security Considerations

### Production Checklist

- [ ] Enable Supabase email confirmation for new signups
- [ ] Configure Supabase auth redirect URLs for your production domain
- [ ] Enable Supabase database backups
- [ ] Set up monitoring and error tracking (e.g., Sentry)
- [ ] Review and adjust RLS policies as needed
- [ ] Enable rate limiting on API routes
- [ ] Configure CORS if using API from external domains
- [ ] Set up proper logging and audit trails
- [ ] Review and limit Supabase service role key usage

---

## 🧪 Testing

### Test User Flow

1. **Sign Up**: Create new account at `/signup`
2. **Create Project**: Go to `/app/new-analysis`
3. **Run Analysis**: Fill in project details and submit
4. **View Results**: See risk analysis at `/app/analysis/[id]`
5. **Export**: Click "Export PDF" to download report

### Test Data

The database is pre-seeded with jurisdiction data for:
- San Jose, CA
- San Francisco, CA
- Oakland, CA

---

## 📚 Architecture Overview

### Frontend

- **Next.js 14** (App Router) - React framework with server components
- **TypeScript** - Type safety throughout
- **Tailwind CSS** - Utility-first styling
- **Supabase Auth** - User authentication

### Backend

- **Next.js API Routes** - Serverless API endpoints
- **Supabase (Postgres)** - Database with Row Level Security
- **OpenAI API** - AI-powered analysis (optional, falls back to mock)

### Database Schema

- `projects` - User projects
- `analyses` - Risk analysis results
- `jurisdictions` - Jurisdiction reference data
- `audit_logs` - Security audit trail

### Key Features

1. **Authentication** - Secure email/password auth with Supabase
2. **Risk Analysis** - AI or mock-based permit risk assessment
3. **Project Management** - Organize analyses by project
4. **Jurisdiction Library** - Reference data for major cities
5. **Export** - PDF report generation
6. **Audit Logging** - Track all user actions

---

## 🛠️ Development Commands
```bash
# Development server
npm run dev

# Type checking
npm run type-check

# Build for production
npm run build

# Start production server
npm start

# Lint code
npm run lint
```

---

## 📖 API Endpoints

### POST /api/analyze
Generates a risk analysis for a project.

**Body:**
```json
{
  "project_id": "uuid",
  "input_text": "Project details...",
  "jurisdiction": "San Jose",
  "permit_type": "Building",
  "building_type": "Residential - Single Family"
}
```

### GET /api/export/[id]
Exports an analysis as an HTML report.

---

## 🎨 Component Library

All UI components are in `src/components/ui/`:
- `Button` - Primary, secondary, ghost, danger variants
- `Input` - Text input with label and error states
- `Card` - Container with consistent padding
- `Badge` - Status indicators
- `Table` - Data tables with header/body/row
- `Modal` - Overlay dialogs
- `Toast` - Notification messages
- `Select` - Dropdown selects
- `Textarea` - Multi-line text input

---

## 🔧 Customization

### Branding

Update colors in `tailwind.config.ts`:
```typescript
colors: {
  primary: {
    // Your brand colors
  }
}
```

### Add Jurisdictions

Insert new jurisdictions via SQL:
```sql
INSERT INTO jurisdictions (name, city, state, ...)
VALUES (...);
```

### Customize Analysis Logic

Edit `src/lib/analyzers/mock-analyzer.ts` or implement your own OpenAI prompts in `src/lib/analyzers/openai-analyzer.ts`.

---

## 📝 License & Disclaimer

This is a demonstration codebase for educational purposes.

**Important:** This system provides decision support only and is not a substitute for professional engineering, architectural, or legal advice. Final permit authority remains with jurisdiction AHJs. Always consult licensed professionals for project-specific guidance.

---

## 🆘 Support

For issues or questions:
1. Check this README thoroughly
2. Review Supabase documentation
3. Check Next.js documentation
4. Review API error messages in browser console

---

**Built with PermitFlow** - Enterprise permit compliance infrastructure,
  "dependencies": {
    "@supabase/ssr": "^0.5.2",
    "@supabase/supabase-js": "^2.45.4",
    "next": "14.2.18",
    "openai": "^4.68.4",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "date-fns": "^3.0.0",
    "jspdf": "^2.5.2"
  },
  "devDependencies": {
    "@types/node": "^20.17.6",
    "@types/react": "^18.3.12",
    "@types/react-dom": "^18.3.1",
    "autoprefixer": "^10.4.20",
    "eslint": "^8.57.1",
    "eslint-config-next": "14.2.18",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.15",
    "typescript": "^5.6.3"
  }
}
````

### `.env.local.example`
````env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# OpenAI (optional - will use mock analyzer if not provided)
OPENAI_API_KEY=your_openai_api_key

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
````

### `next.config.js`
````js
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    serverActions: true,
  },
  images: {
    domains: [],
  },
}

module.exports = nextConfig
````

### `tailwind.config.ts`
````ts
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          200: '#bae6fd',
          300: '#7dd3fc',
          400: '#38bdf8',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
          800: '#075985',
          900: '#0c4a6e',
        },
        neutral: {
          50: '#fafafa',
          100: '#f5f5f5',
          200: '#e5e5e5',
          300: '#d4d4d4',
          400: '#a3a3a3',
          500: '#737373',
          600: '#525252',
          700: '#404040',
          800: '#262626',
          900: '#171717',
        }
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace'],
      },
    },
  },
  plugins: [],
}
export default config
````

### `tsconfig.json`
````json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
````

### `postcss.config.js`
````js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
````

### `.gitignore`
`````
# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# local env files
.env*.local
.env

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
``````

### `src/app/globals.css`
``````css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-neutral-200;
  }
  
  body {
    @apply bg-white text-neutral-900 antialiased;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}
``````

### `src/lib/types.ts`
``````typescript
export interface User {
  id: string;
  email: string;
  created_at: string;
}

export interface Project {
  id: string;
  user_id: string;
  name: string;
  address: string;
  city: string;
  project_type: string;
  scope: string;
  created_at: string;
  updated_at: string;
}

export interface Analysis {
  id: string;
  project_id: string;
  user_id: string;
  input_text?: string;
  file_url?: string;
  jurisdiction?: string;
  permit_type?: string;
  building_type?: string;
  risk_score: number;
  approval_probability: number;
  expected_review_time_days: number;
  confidence_level: 'low' | 'medium' | 'high';
  summary: string;
  top_risks: RiskFactor[];
  jurisdiction_flags: JurisdictionFlag[];
  created_at: string;
}

export interface RiskFactor {
  title: string;
  severity: 'low' | 'medium' | 'high' | 'critical';
  code_refs?: string[];
  explanation: string;
  fix_recommendations: string[];
}

export interface JurisdictionFlag {
  flag: string;
  why_it_matters: string;
  mitigation: string;
}

export interface Jurisdiction {
  id: string;
  name: string;
  city: string;
  state: string;
  typical_cycle_time_min: number;
  typical_cycle_time_max: number;
  common_rejection_themes: string[];
  submission_checklist: string[];
  created_at: string;
}

export interface AuditLog {
  id: string;
  user_id: string;
  event_type: string;
  event_data: any;
  ip_address?: string;
  created_at: string;
}
``````

### `src/lib/utils.ts`
``````typescript
import { type ClassValue, clsx } from 'clsx';

export function cn(...inputs: ClassValue[]) {
  return inputs.filter(Boolean).join(' ');
}

export function formatDate(date: string | Date): string {
  return new Date(date).toLocaleDateString('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric'
  });
}

export function getSeverityColor(severity: string): string {
  const colors: Record<string, string> = {
    low: 'bg-green-100 text-green-800 border-green-200',
    medium: 'bg-yellow-100 text-yellow-800 border-yellow-200',
    high: 'bg-orange-100 text-orange-800 border-orange-200',
    critical: 'bg-red-100 text-red-800 border-red-200',
  };
  return colors[severity] || colors.medium;
}

export function getConfidenceColor(confidence: string): string {
  const colors: Record<string, string> = {
    low: 'bg-neutral-100 text-neutral-700',
    medium: 'bg-blue-100 text-blue-700',
    high: 'bg-green-100 text-green-700',
  };
  return colors[confidence] || colors.medium;
}
``````

### `src/lib/supabase/client.ts`
``````typescript
import { createBrowserClient } from '@supabase/ssr';

export function createClient() {
  return createBrowserClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );
}
``````

### `src/lib/supabase/server.ts`
``````typescript
import { createServerClient, type CookieOptions } from '@supabase/ssr';
import { cookies } from 'next/headers';

export async function createClient() {
  const cookieStore = await cookies();

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name: string) {
          return cookieStore.get(name)?.value;
        },
        set(name: string, value: string, options: CookieOptions) {
          try {
            cookieStore.set({ name, value, ...options });
          } catch (error) {
            // Server component
          }
        },
        remove(name: string, options: CookieOptions) {
          try {
            cookieStore.set({ name, value: '', ...options });
          } catch (error) {
            // Server component
          }
        },
      },
    }
  );
}
``````

### `src/middleware.ts`
``````typescript
import { createServerClient, type CookieOptions } from '@supabase/ssr';
import { NextResponse, type NextRequest } from 'next/server';

export async function middleware(request: NextRequest) {
  let response = NextResponse.next({
    request: {
      headers: request.headers,
    },
  });

  const supabase = createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name: string) {
          return request.cookies.get(name)?.value;
        },
        set(name: string, value: string, options: CookieOptions) {
          request.cookies.set({
            name,
            value,
            ...options,
          });
          response = NextResponse.next({
            request: {
              headers: request.headers,
            },
          });
          response.cookies.set({
            name,
            value,
            ...options,
          });
        },
        remove(name: string, options: CookieOptions) {
          request.cookies.set({
            name,
            value: '',
            ...options,
          });
          response = NextResponse.next({
            request: {
              headers: request.headers,
            },
          });
          response.cookies.set({
            name,
            value: '',
            ...options,
          });
        },
      },
    }
  );

  const { data: { user } } = await supabase.auth.getUser();

  // Protected routes
  if (request.nextUrl.pathname.startsWith('/app') && !user) {
    return NextResponse.redirect(new URL('/login', request.url));
  }

  // Redirect logged-in users away from auth pages
  if ((request.nextUrl.pathname === '/login' || request.nextUrl.pathname === '/signup') && user) {
    return NextResponse.redirect(new URL('/app', request.url));
  }

  return response;
}

export const config = {
  matcher: ['/app/:path*', '/login', '/signup'],
};
``````

### `src/lib/analyzers/mock-analyzer.ts`
``````typescript
import { RiskFactor, JurisdictionFlag } from '../types';

interface AnalysisInput {
  projectType?: string;
  buildingType?: string;
  jurisdiction?: string;
  permitType?: string;
  inputText?: string;
}

export async function generateMockAnalysis(input: AnalysisInput) {
  // Simulate API delay
  await new Promise(resolve => setTimeout(resolve, 1500));

  const { projectType, buildingType, jurisdiction, permitType } = input;

  // Base risk score calculation (mock logic)
  let riskScore = 65;
  if (buildingType?.toLowerCase().includes('residential')) riskScore -= 10;
  if (jurisdiction?.toLowerCase().includes('san jose')) riskScore += 5;
  if (permitType?.toLowerCase().includes('structural')) riskScore += 15;

  riskScore = Math.max(0, Math.min(100, riskScore));
  const approvalProbability = 100 - riskScore;

  // Calculate review time
  let reviewDays = 45;
  if (riskScore > 70) reviewDays += 20;
  if (riskScore < 40) reviewDays -= 15;

  const topRisks: RiskFactor[] = [
    {
      title: 'Setback Requirements Compliance',
      severity: riskScore > 60 ? 'high' : 'medium',
      code_refs: ['CBC 503.1.1', 'Local Zoning §17.10.050'],
      explanation: 'Project plans show structures within 15 feet of property line in R-1 zone. Code requires minimum 20-foot side setback for two-story structures.',
      fix_recommendations: [
        'Revise site plan to comply with 20-foot minimum setback',
        'Consider variance application if physical constraints exist',
        'Provide detailed survey showing exact property boundaries'
      ]
    },
    {
      title: 'Fire Egress Path Documentation',
      severity: 'high',
      code_refs: ['CBC 1006.2.1', 'IBC Section 1006'],
      explanation: 'Submitted plans lack clear egress path markings from second floor bedrooms. All sleeping areas must show compliant emergency egress per current building code.',
      fix_recommendations: [
        'Add egress window specifications (minimum 5.7 sq ft opening)',
        'Show clear egress path to grade or approved alternative',
        'Include window well details if below-grade windows proposed'
      ]
    },
    {
      title: 'Energy Compliance Calculations Missing',
      severity: 'medium',
      code_refs: ['Title 24 Part 6', 'CBC Section 1505'],
      explanation: 'CF-1R energy compliance forms not included in submittal package. California Title 24 energy calculations are mandatory for all new construction and additions over 400 sq ft.',
      fix_recommendations: [
        'Complete CF-1R forms using approved calculation software',
        'Include insulation R-value specifications',
        'Provide HVAC efficiency documentation'
      ]
    },
    {
      title: 'Incomplete Structural Details',
      severity: riskScore > 65 ? 'high' : 'medium',
      code_refs: ['CBC 1603', 'CBC 1613.1'],
      explanation: 'Foundation and lateral load calculations require engineer stamp. Shear wall schedule and hold-down specifications are not clearly detailed.',
      fix_recommendations: [
        'Obtain structural engineer review and stamp',
        'Provide complete shear wall schedule with nailing patterns',
        'Include foundation sizing calculations and rebar schedule'
      ]
    }
  ];

  const jurisdictionFlags: JurisdictionFlag[] = [];

  if (jurisdiction?.toLowerCase().includes('san jose')) {
    jurisdictionFlags.push({
      flag: 'ADU Review Backlog',
      why_it_matters: 'San Jose currently processing ADU permits 15-20% slower than typical due to increased volume. Expect extended plan check cycles.',
      mitigation: 'Submit complete initial package to avoid multiple correction cycles. Consider pre-application meeting to address complex items early.'
    });
    jurisdictionFlags.push({
      flag: 'Stormwater Requirements Strict',
      why_it_matters: 'San Jose has enhanced stormwater management requirements beyond state minimum. Projects over 2,500 sq ft disturbed area require detailed drainage plans.',
      mitigation: 'Include C.3 stormwater compliance documentation. Show all impervious surface calculations and runoff mitigation measures.'
    });
  }

  if (jurisdiction?.toLowerCase().includes('san francisco')) {
    jurisdictionFlags.push({
      flag: 'Dwelling Unit Legalization Required',
      why_it_matters: 'SF requires legalization of any existing unpermitted work before issuing new permits. Even minor past work can trigger delays.',
      mitigation: 'Conduct thorough permit history review. Consider legalization application if unpermitted work discovered.'
    });
  }

  const confidenceLevel = riskScore > 70 ? 'high' : riskScore > 50 ? 'medium' : 'low';

  return {
    risk_score: riskScore,
    approval_probability: approvalProbability,
    expected_review_time_days: reviewDays,
    confidence_level: confidenceLevel,
    summary: `Analysis of ${projectType || 'project'} in ${jurisdiction || 'specified jurisdiction'} indicates a ${riskScore > 65 ? 'elevated' : 'moderate'} compliance risk profile with ${topRisks.length} primary code concerns identified. Expected review cycle is ${reviewDays} days assuming complete initial submittal. Key risk factors include setback compliance, egress documentation, and energy code requirements. Recommend addressing structural engineering review and Title 24 calculations prior to formal submittal to reduce correction cycle likelihood.`,
    top_risks: topRisks,
    jurisdiction_flags: jurisdictionFlags
  };
}
``````

### `src/lib/analyzers/openai-analyzer.ts`
``````typescript
import OpenAI from 'openai';
import { RiskFactor, JurisdictionFlag } from '../types';

const openai = process.env.OPENAI_API_KEY ? new OpenAI({
  apiKey: process.env.OPENAI_API_KEY
}) : null;

interface AnalysisInput {
  projectType?: string;
  buildingType?: string;
  jurisdiction?: string;
  permitType?: string;
  inputText?: string;
}

export async function generateOpenAIAnalysis(input: AnalysisInput) {
  if (!openai) {
    throw new Error('OpenAI API key not configured');
  }

  const prompt = `You are an expert construction permit compliance analyzer. Analyze the following project for permit approval risk.

Project Details:
- Type: ${input.projectType || 'Not specified'}
- Building Type: ${input.buildingType || 'Not specified'}
- Jurisdiction: ${input.jurisdiction || 'Not specified'}
- Permit Type: ${input.permitType || 'Not specified'}
- Additional Details: ${input.inputText || 'None provided'}

Provide a comprehensive risk analysis in the following JSON format:
{
  "risk_score": <number 0-100>,
  "approval_probability": <number 0-100>,
  "expected_review_time_days": <number>,
  "confidence_level": "<low|medium|high>",
  "summary": "<executive summary>",
  "top_risks": [
    {
      "title": "<risk title>",
      "severity": "<low|medium|high|critical>",
      "code_refs": ["<code references>"],
      "explanation": "<detailed explanation>",
      "fix_recommendations": ["<actionable fixes>"]
    }
  ],
  "jurisdiction_flags": [
    {
      "flag": "<jurisdiction-specific concern>",
      "why_it_matters": "<explanation>",
      "mitigation": "<recommended action>"
    }
  ]
}

Focus on: setback requirements, fire/life safety, energy code, structural adequacy, zoning compliance, and jurisdiction-specific patterns.`;

  const completion = await openai.chat.completions.create({
    model: 'gpt-4',
    messages: [
      {
        role: 'system',
        content: 'You are an expert construction permit compliance analyst with deep knowledge of building codes, zoning regulations, and permitting processes.'
      },
      {
        role: 'user',
        content: prompt
      }
    ],
    response_format: { type: 'json_object' },
    temperature: 0.7
  });

  const result = JSON.parse(completion.choices[0].message.content || '{}');
  return result;
}
``````

### `src/components/ui/Button.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
}

export function Button({ 
  variant = 'primary', 
  size = 'md', 
  className, 
  children, 
  ...props 
}: ButtonProps) {
  const baseStyles = 'inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none';
  
  const variants = {
    primary: 'bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500',
    secondary: 'bg-neutral-100 text-neutral-900 hover:bg-neutral-200 focus:ring-neutral-500',
    ghost: 'hover:bg-neutral-100 text-neutral-700 hover:text-neutral-900',
    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500'
  };
  
  const sizes = {
    sm: 'px-3 py-1.5 text-sm',
    md: 'px-4 py-2 text-sm',
    lg: 'px-6 py-3 text-base'
  };
  
  return (
    <button
      className={cn(baseStyles, variants[variant], sizes[size], className)}
      {...props}
    >
      {children}
    </button>
  );
}
``````

### `src/components/ui/Input.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
}

export const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ label, error, className, ...props }, ref) => {
    return (
      <div className="w-full">
        {label && (
          <label className="block text-sm font-medium text-neutral-700 mb-1.5">
            {label}
          </label>
        )}
        <input
          ref={ref}
          className={cn(
            'w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm',
            'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',
            'disabled:bg-neutral-50 disabled:text-neutral-500',
            error && 'border-red-500 focus:ring-red-500',
            className
          )}
          {...props}
        />
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
      </div>
    );
  }
);

Input.displayName = 'Input';
``````

### `src/components/ui/Card.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface CardProps {
  children: React.ReactNode;
  className?: string;
  padding?: 'none' | 'sm' | 'md' | 'lg';
}

export function Card({ children, className, padding = 'md' }: CardProps) {
  const paddings = {
    none: '',
    sm: 'p-4',
    md: 'p-6',
    lg: 'p-8'
  };
  
  return (
    <div className={cn(
      'bg-white border border-neutral-200 rounded-lg',
      paddings[padding],
      className
    )}>
      {children}
    </div>
  );
}
``````

### `src/components/ui/Badge.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface BadgeProps {
  children: React.ReactNode;
  variant?: 'default' | 'success' | 'warning' | 'danger' | 'info';
  className?: string;
}

export function Badge({ children, variant = 'default', className }: BadgeProps) {
  const variants = {
    default: 'bg-neutral-100 text-neutral-700 border-neutral-200',
    success: 'bg-green-100 text-green-700 border-green-200',
    warning: 'bg-yellow-100 text-yellow-700 border-yellow-200',
    danger: 'bg-red-100 text-red-700 border-red-200',
    info: 'bg-blue-100 text-blue-700 border-blue-200'
  };
  
  return (
    <span className={cn(
      'inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium border',
      variants[variant],
      className
    )}>
      {children}
    </span>
  );
}
``````

### `src/components/ui/Table.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface TableProps {
  children: React.ReactNode;
  className?: string;
}

export function Table({ children, className }: TableProps) {
  return (
    <div className="w-full overflow-x-auto">
      <table className={cn('w-full text-sm text-left', className)}>
        {children}
      </table>
    </div>
  );
}

export function TableHeader({ children }: { children: React.ReactNode }) {
  return (
    <thead className="text-xs text-neutral-700 uppercase bg-neutral-50 border-b border-neutral-200">
      {children}
    </thead>
  );
}

export function TableBody({ children }: { children: React.ReactNode }) {
  return <tbody className="divide-y divide-neutral-200">{children}</tbody>;
}

export function TableRow({ children, className }: { children: React.ReactNode; className?: string }) {
  return <tr className={cn('hover:bg-neutral-50', className)}>{children}</tr>;
}

export function TableHead({ children, className }: { children: React.ReactNode; className?: string }) {
  return <th scope="col" className={cn('px-6 py-3', className)}>{children}</th>;
}

export function TableCell({ children, className }: { children: React.ReactNode; className?: string }) {
  return <td className={cn('px-6 py-4', className)}>{children}</td>;
}
``````

### `src/components/ui/Select.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface SelectProps extends React.SelectHTMLAttributes<HTMLSelectElement> {
  label?: string;
  error?: string;
  options: { value: string; label: string }[];
}

export const Select = React.forwardRef<HTMLSelectElement, SelectProps>(
  ({ label, error, options, className, ...props }, ref) => {
    return (
      <div className="w-full">
        {label && (
          <label className="block text-sm font-medium text-neutral-700 mb-1.5">
            {label}
          </label>
        )}
        <select
          ref={ref}
          className={cn(
            'w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm',
            'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',
            'disabled:bg-neutral-50 disabled:text-neutral-500',
            error && 'border-red-500 focus:ring-red-500',
            className
          )}
          {...props}
        >
          {options.map(option => (
            <option key={option.value} value={option.value}>
              {option.label}
            </option>
          ))}
        </select>
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
      </div>
    );
  }
);

Select.displayName = 'Select';
``````

### `src/components/ui/Textarea.tsx`
``````typescript
import React from 'react';
import { cn } from '@/lib/utils';

interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {
  label?: string;
  error?: string;
}

export const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ label, error, className, ...props }, ref) => {
    return (
      <div className="w-full">
        {label && (
          <label className="block text-sm font-medium text-neutral-700 mb-1.5">
            {label}
          </label>
        )}
        <textarea
          ref={ref}
          className={cn(
            'w-full px-3 py-2 border border-neutral-300 rounded-lg text-sm',
            'focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent',
            'disabled:bg-neutral-50 disabled:text-neutral-500',
            error && 'border-red-500 focus:ring-red-500',
            className
          )}
          rows={4}
          {...props}
        />
        {error && (
          <p className="mt-1 text-sm text-red-600">{error}</p>
        )}
      </div>
    );
  }
);

Textarea.displayName = 'Textarea';
``````

### `src/components/ui/Modal.tsx`
``````typescript
'use client';

import React, { useEffect } from 'react';
import { cn } from '@/lib/utils';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  children: React.ReactNode;
  title?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}

export function Modal({ isOpen, onClose, children, title, size = 'md' }: ModalProps) {
  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }
    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);

  if (!isOpen) return null;

  const sizes = {
    sm: 'max-w-md',
    md: 'max-w-2xl',
    lg: 'max-w-4xl',
    xl: 'max-w-6xl'
  };

  return (
    <div className="fixed inset-0 z-50 overflow-y-auto">
      <div className="flex min-h-full items-center justify-center p-4">
        <div 
          className="fixed inset-0 bg-black/30 transition-opacity" 
          onClick={onClose}
        />
        <div className={cn(
          'relative w-full bg-white rounded-lg shadow-xl',
          sizes[size]
        )}>
          {title && (
            <div className="border-b border-neutral-200 px-6 py-4">
              <h3 className="text-lg font-semibold text-neutral-900">{title}</h3>
            </div>
          )}
          <div className="p-6">
            {children}
          </div>
        </div>
      </div>
    </div>
  );
}
``````

### `src/components/ui/Toast.tsx`
``````typescript
'use client';

import React, { useState, useEffect } from 'react';
import { cn } from '@/lib/utils';

interface ToastProps {
  message: string;
  type?: 'success' | 'error' | 'info';
  duration?: number;
  onClose?: () => void;
}

export function Toast({ message, type = 'info', duration = 3000, onClose }: ToastProps) {
  const [isVisible, setIsVisible] = useState(true);

  useEffect(() => {
    const timer = setTimeout(() => {
      setIsVisible(false);
      onClose?.();
    }, duration);

    return () => clearTimeout(timer);
  }, [duration, onClose]);

  if (!isVisible) return null;

  const types = {
    success: 'bg-green-600 text-white',
    error: 'bg-red-600 text-white',
    info: 'bg-primary-600 text-white'
  };

  return (
    <div className="fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom">
      <div className={cn(
        'px-6 py-4 rounded-lg shadow-lg',
        types[type]
      )}>
        <p className="text-sm font-medium">{message}</p>
      </div>
    </div>
  );
}
``````

### `src/components/layout/Header.tsx`
``````typescript
'use client';

import Link from 'next/link';
import { Button } from '@/components/ui/Button';

export function Header() {
  return (
    <header className="border-b border-neutral-200 bg-white">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <Link href="/" className="flex items-center">
            <span className="text-xl font-semibold text-neutral-900">PermitFlow</span>
          </Link>
          
          <nav className="hidden md:flex space-x-8">
            <Link href="/product" className="text-sm text-neutral-600 hover:text-neutral-900">
              Product
            </Link>
            <Link href="/pricing" className="text-sm text-neutral-600 hover:text-neutral-900">
              Pricing
            </Link>
            <Link href="/security" className="text-sm text-neutral-600 hover:text-neutral-900">
              Security
            </Link>
            <Link href="/case-studies" className="text-sm text-neutral-600 hover:text-neutral-900">
              Case Studies
            </Link>
            <Link href="/contact" className="text-sm text-neutral-600 hover:text-neutral-900">
              Contact
            </Link>
          </nav>
          
          <div className="flex items-center space-x-4">
            <Link href="/login">
              <Button variant="ghost" size="sm">Sign In</Button>
            </Link>
            <Link href="/signup">
              <Button size="sm">Start Free Trial</Button>
            </Link>
          </div>
        </div>
      </div>
    </header>
  );
}
``````

### `src/components/layout/Footer.tsx`
``````typescript
import Link from 'next/link';

export function Footer() {
  return (
    <footer className="bg-neutral-900 text-neutral-400">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 className="text-white font-semibold mb-4">PermitFlow</h3>
            <p className="text-sm">
              Compliance and risk infrastructure for construction permitting.
            </p>
          </div>
          
          <div>
            <h4 className="text-white font-medium mb-4">Product</h4>
            <ul className="space-y-2 text-sm">
              <li><Link href="/product" className="hover:text-white">How it Works</Link></li>
              <li><Link href="/pricing" className="hover:text-white">Pricing</Link></li>
              <li><Link href="/security" className="hover:text-white">Security</Link></li>
            </ul>
          </div>
          
          <div>
            <h4 className="text-white font-medium mb-4">Company</h4>
            <ul className="space-y-2 text-sm">
              <li><Link href="/case-studies" className="hover:text-white">Case Studies</Link></li>
              <li><Link href="/contact" className="hover:text-white">Contact</Link></li>
            </ul>
          </div>
          
          <div>
            <h4 className="text-white font-medium mb-4">Legal</h4>
            <ul className="space-y-2 text-sm">
              <li><Link href="#" className="hover:text-white">Privacy Policy</Link></li>
              <li><Link href="#" className="hover:text-white">Terms of Service</Link></li>
            </ul>
          </div>
        </div>
        
        <div className="mt-12 pt-8 border-t border-neutral-800 text-sm text-center">
          <p>© 2024 PermitFlow. Decision support tool, not legal advice. Final authority remains with jurisdiction AHJ.</p>
        </div>
      </div>
    </footer>
  );
}
``````

### `src/components/layout/AppHeader.tsx`
``````typescript
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { Button } from '@/components/ui/Button';
import { createClient } from '@/lib/supabase/client';
import { useRouter } from 'next/navigation';

export function AppHeader() {
  const pathname = usePathname();
  const router = useRouter();
  const supabase = createClient();

  const handleSignOut = async () => {
    await supabase.auth.signOut();
    router.push('/');
  };

  const navItems = [
    { href: '/app', label: 'Dashboard' },
    { href: '/app/projects', label: 'Projects' },
    { href: '/app/jurisdictions', label: 'Jurisdictions' },
    { href: '/app/settings', label: 'Settings' },
  ];

  return (
    <header className="border-b border-neutral-200 bg-white">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between items-center h-16">
          <Link href="/app" className="flex items-center">
            <span className="text-xl font-semibold text-neutral-900">PermitFlow</span>
          </Link>
          
          <nav className="hidden md:flex space-x-6">
            {navItems.map(item => (
              <Link
                key={item.href}
                href={item.href}
                className={`text-sm ${
                  pathname === item.href
                    ? 'text-primary-600 font-medium'
                    : 'text-neutral-600 hover:text-neutral-900'
                }`}
              >
                {item.label}
              </Link>
            ))}
          </nav>
          
          <Button variant="ghost" size="sm" onClick={handleSignOut}>
            Sign Out
          </Button>
        </div>
      </div>
    </header>
  );
}
``````

### `src/app/layout.tsx`
``````typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'PermitFlow - Compliance & Risk Infrastructure for Construction',
  description: 'AI-driven permit compliance risk analysis for developers, builders, and contractors',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body className={inter.className}>{children}</body>
    </html>
  );
}
``````

### `src/app/page.tsx`
``````typescript
import Link from 'next/link';
import { Header } from '@/components/layout/Header';
import { Footer } from '@/components/layout/Footer';
import { Button } from '@/components/ui/Button';
import { Card } from '@/components/ui/Card';

export default function HomePage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      
      <main className="flex-1">
        {/* Hero */}
        <section className="bg-gradient-to-b from-neutral-50 to-white py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="max-w-3xl mx-auto text-center">
              <h1 className="text-5xl font-bold text-neutral-900 mb-6">
                Reduce Permit Risk Before You Submit
              </h1>
              <p className="text-xl text-neutral-600 mb-8">
                AI-powered compliance analysis that predicts approval probability, identifies code risks, and reduces review cycles for construction projects.
              </p>
              <div className="flex justify-center space-x-4">
                <Link href="/signup">
                  <Button size="lg">Start Free Trial</Button>
                </Link>
                <Link href="/product">
                  <Button variant="secondary" size="lg">Learn More</Button>
                </Link>
              </div>
              <p className="mt-6 text-sm text-neutral-500">
                No credit card required • 14-day free trial • Cancel anytime
              </p>
            </div>
          </div>
        </section>

        {/* Stats */}
        <section className="py-16 border-y border-neutral-200">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
              <div>
                <div className="text-4xl font-bold text-primary-600 mb-2">67%</div>
                <div className="text-sm text-neutral-600">Average reduction in correction cycles</div>
              </div>
              <div>
                <div className="text-4xl font-bold text-primary-600 mb-2">23 days</div>
                <div className="text-sm text-neutral-600">Faster time to permit approval</div>
              </div>
              <div>
                <div className="text-4xl font-bold text-primary-600 mb-2">92%</div>
                <div className="text-sm text-neutral-600">First-submittal approval rate</div>
              </div>
            </div>
          </div>
        </section>

        {/* Features */}
        <section className="py-20">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center mb-16">
              <h2 className="text-3xl font-bold text-neutral-900 mb-4">
                Enterprise Compliance Intelligence
              </h2>
              <p className="text-lg text-neutral-600 max-w-2xl mx-auto">
                Predict permit outcomes, identify code risks, and streamline approval workflows with jurisdiction-specific intelligence.
              </p>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              <Card>
                <div className="text-primary-600 mb-4">
                  <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-neutral-900 mb-2">Risk Score Analysis</h3>
                <p className="text-sm text-neutral-600">
                  Quantified approval probability and review time predictions based on jurisdiction patterns, code compliance, and project characteristics.
                </p>
              </Card>
              
              <Card>
                <div className="text-primary-600 mb-4">
                  <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-neutral-900 mb-2">Code Compliance Review</h3>
                <p className="text-sm text-neutral-600">
                  Automated identification of setback violations, egress requirements, energy code gaps, and structural documentation deficiencies.
                </p>
              </Card>
              
              <Card>
                <div className="text-primary-600 mb-4">
                  <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-neutral-900 mb-2">Jurisdiction Intelligence</h3>
                <p className="text-sm text-neutral-600">
                  City-specific review patterns, common rejection causes, and submission requirements for major California jurisdictions.
                </p>
              </Card>
            </div>
          </div>
        </section>

        {/* CTA */}
        <section className="bg-neutral-900 text-white py-20">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 className="text-3xl font-bold mb-4">
              Ready to reduce permit risk?
            </h2>
            <p className="text-lg text-neutral-300 mb-8">
              Join developers and contractors using PermitFlow to streamline permit approval.
            </p>
            <Link href="/signup">
              <Button size="lg" className="bg-white text-neutral-900 hover:bg-neutral-100">
                Start Free Trial
              </Button>
            </Link>
            <p className="mt-4 text-sm text-neutral-400">
              Decision support tool, not legal advice. Final authority remains with jurisdiction AHJ.
            </p>
          </div>
        </section>
      </main>
      
      <Footer />
    </div>
  );
}